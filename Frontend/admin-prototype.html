<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mimarlık Admin Panel - Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        .sidebar-item:hover { background-color: #eff6ff; color: #2563eb; }
        .category-tree { margin-left: 1rem; }
        .category-item { padding: 0.5rem; border: 1px solid #e5e7eb; margin-bottom: 0.25rem; border-radius: 0.375rem; }
        .category-item:hover { background-color: #f3f4f6; }
        .drag-over { background-color: #dbeafe; border-color: #3b82f6; }
    </style>
</head>
<body class="bg-gray-100" x-data="adminApp()">
    <!-- Sidebar -->
    <div class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-40">
        <div class="p-4 border-b border-gray-200">
            <h1 class="text-2xl font-bold text-blue-600">Mimarlık Admin</h1>
        </div>
        
        <nav class="mt-4">
            <ul class="space-y-1">
                <li>
                    <button @click="currentPage = 'dashboard'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'dashboard' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">📊</span> Dashboard
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'categories'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'categories' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">📁</span> Categories
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'projects'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'projects' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">🏗️</span> Projects
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'photos'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'photos' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">📸</span> Photos
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'slider'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'slider' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">🎞️</span> Homepage Slider
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'languages'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'languages' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">🌐</span> Languages
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'translations'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'translations' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">📝</span> Translations
                    </button>
                </li>
                <li>
                    <button @click="currentPage = 'seo'" 
                            class="w-full text-left px-4 py-3 sidebar-item flex items-center"
                            :class="currentPage === 'seo' ? 'bg-blue-50 text-blue-600' : 'text-gray-700'">
                        <span class="mr-3">🔍</span> SEO Management
                    </button>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="ml-64 p-6">
        <!-- Header -->
        <div class="mb-6 bg-white p-4 rounded-lg shadow">
            <div class="flex justify-between items-center">
                <h2 class="text-xl font-semibold" x-text="getPageTitle()"></h2>
                <div class="flex items-center space-x-4">
                    <select x-model="currentLanguage" @change="loadData()" 
                            class="border rounded px-3 py-1">
                        <option value="1">Türkçe</option>
                        <option value="2">English</option>
                        <option value="3">Deutsch</option>
                    </select>
                    <span class="text-sm text-gray-500">API: <span :class="apiConnected ? 'text-green-600' : 'text-red-600'" x-text="apiConnected ? 'Connected' : 'Disconnected'"></span></span>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div x-show="currentPage === 'dashboard'" x-cloak>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Total Projects</p>
                            <p class="text-2xl font-bold text-gray-900" x-text="stats.projects"></p>
                        </div>
                        <div class="text-4xl">🏗️</div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Total Photos</p>
                            <p class="text-2xl font-bold text-gray-900" x-text="stats.photos"></p>
                        </div>
                        <div class="text-4xl">📸</div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Categories</p>
                            <p class="text-2xl font-bold text-gray-900" x-text="stats.categories"></p>
                        </div>
                        <div class="text-4xl">📁</div>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">Recent Projects</h3>
                <div class="space-y-3">
                    <template x-for="project in recentProjects" :key="project.id">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <div>
                                <h4 class="font-medium" x-text="project.title"></h4>
                                <p class="text-sm text-gray-600" x-text="project.description"></p>
                            </div>
                            <span class="px-2 py-1 text-xs rounded-full"
                                  :class="getStatusColor(project.status)"
                                  x-text="getStatusText(project.status)"></span>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Categories Page -->
        <div x-show="currentPage === 'categories'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Category Management</h3>
                    <button @click="showCategoryForm = true" 
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        Add Category
                    </button>
                </div>
                
                <!-- Search Bar -->
                <div class="mb-4">
                    <input type="text" x-model="categorySearch" @input="filterCategories()" 
                           placeholder="Search categories by title or description..."
                           class="w-full border rounded px-3 py-2">
                </div>
                
                <div class="category-tree">
                    <template x-for="category in filteredCategories" :key="category.id">
                        <div class="mb-2">
                            <div class="category-item flex items-center justify-between"
                                 draggable="true"
                                 @dragstart="dragStart($event, category)"
                                 @dragover.prevent="dragOver($event)"
                                 @drop="drop($event, category)">
                                <div class="flex items-center">
                                    <span class="mr-2">📁</span>
                                    <span x-text="category.title"></span>
                                    <span class="ml-2 text-xs text-gray-500" x-text="'(' + category.children.length + ' subcategories)'"></span>
                                </div>
                                <div class="flex space-x-2">
                                    <button @click="editCategory(category)" class="text-blue-600 hover:text-blue-800">✏️</button>
                                    <button @click="deleteCategory(category.id)" class="text-red-600 hover:text-red-800">🗑️</button>
                                </div>
                            </div>
                            <div class="ml-4" x-show="category.children && category.children.length > 0">
                                <template x-for="child in category.children" :key="child.id">
                                    <div class="category-item flex items-center justify-between mt-1">
                                        <div class="flex items-center">
                                            <span class="mr-2">📂</span>
                                            <span x-text="child.title"></span>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button @click="editCategory(child)" class="text-blue-600 hover:text-blue-800">✏️</button>
                                            <button @click="deleteCategory(child.id)" class="text-red-600 hover:text-red-800">🗑️</button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Projects Page -->
        <div x-show="currentPage === 'projects'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Project Management</h3>
                    <button @click="showProjectForm = true" 
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        Add Project
                    </button>
                </div>
                
                <!-- Search and Filter Bar -->
                <div class="mb-4 flex flex-col md:flex-row md:items-center md:space-x-4 space-y-2 md:space-y-0">
                    <div class="flex-1">
                        <input type="text" x-model="projectSearch" @input="filterProjects()" 
                               placeholder="Search projects by title, description, location, or client..."
                               class="w-full border rounded px-3 py-2">
                    </div>
                    <div>
                        <select x-model="selectedProjectFilter" @change="filterProjects()" 
                                class="border rounded px-3 py-2">
                            <option value="">All Categories</option>
                            <template x-for="category in categories" :key="category.id">
                                <option :value="category.id" x-text="category.title"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <select x-model="projectStatusFilter" @change="filterProjects()" 
                                class="border rounded px-3 py-2">
                            <option value="">All Status</option>
                            <option value="1">Published</option>
                            <option value="2">Hidden</option>
                            <option value="3">Draft</option>
                        </select>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-2 text-left">Title</th>
                                <th class="px-4 py-2 text-left">Category</th>
                                <th class="px-4 py-2 text-left">Status</th>
                                <th class="px-4 py-2 text-left">Photos</th>
                                <th class="px-4 py-2 text-left">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="project in filteredProjects" :key="project.id">
                                <tr class="border-t hover:bg-gray-50 transition-colors" :data-project-id="project.id">
                                    <td class="px-4 py-2" x-text="project.title"></td>
                                    <td class="px-4 py-2" x-text="project.category?.title || 'No Category'"></td>
                                    <td class="px-4 py-2">
                                        <span class="px-2 py-1 text-xs rounded-full"
                                              :class="getStatusColor(project.status)"
                                              x-text="getStatusText(project.status)"></span>
                                    </td>
                                    <td class="px-4 py-2" x-text="project.photos?.length || 0"></td>
                                    <td class="px-4 py-2">
                                        <div class="flex space-x-2">
                                            <button @click="editProject(project)" class="text-blue-600 hover:text-blue-800">✏️</button>
                                            <button @click="toggleProjectStatus(project)" class="text-yellow-600 hover:text-yellow-800">👁️</button>
                                            <button @click="deleteProject(project.id)" class="text-red-600 hover:text-red-800">🗑️</button>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Photos Page -->
        <div x-show="currentPage === 'photos'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <!-- Search and Filter Bar -->
                <div class="mb-4">
                    <input type="text" x-model="photoSearch" @input="filterPhotos()" 
                           placeholder="Search photos by alt text, caption, or filename..."
                           class="w-full border rounded px-3 py-2 mb-2">
                </div>
                
                <div class="mb-4 flex justify-between items-center">
                    <div class="flex space-x-2 items-center">
                        <select x-model="selectedProjectFilter" @change="filterPhotos()" 
                                class="border rounded px-3 py-1">
                            <option value="">All Projects</option>
                            <template x-for="project in projects" :key="project.id">
                                <option :value="project.id" x-text="project.title"></option>
                            </template>
                        </select>
                        <button @click="showPhotoUpload = true" 
                                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            Upload Photos
                        </button>
                        <button @click="openSliderPreview()" 
                                class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            🌆 Preview Slider
                        </button>
                    </div>
                    <div class="flex space-x-2 items-center" x-show="selectedPhotos.length > 0">
                        <span class="text-sm text-gray-600" x-text="selectedPhotos.length + ' selected'"></span>
                        <button @click="bulkAddToSlider()" 
                                class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                            Add to Slider
                        </button>
                        <button @click="bulkRemoveFromSlider()" 
                                class="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700">
                            Remove from Slider
                        </button>
                        <button @click="bulkDelete()" 
                                class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">
                            Delete Selected
                        </button>
                        <button @click="selectedPhotos = []" 
                                class="bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700">
                            Clear Selection
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <template x-for="photo in filteredPhotos" :key="photo.id">
                        <div class="relative group border rounded-lg overflow-hidden" 
                             :class="selectedPhotos.includes(photo.id) ? 'ring-2 ring-blue-500' : ''">
                            <!-- Selection checkbox -->
                            <div class="absolute top-2 left-2 z-10">
                                <input type="checkbox" 
                                       :checked="selectedPhotos.includes(photo.id)"
                                       @change="togglePhotoSelection(photo.id)"
                                       class="w-4 h-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500">
                            </div>
                            
                            <div class="cursor-pointer" @click="openPhotoPreview(photo)">
                                <img :src="getPhotoUrl(photo)" 
                                     :alt="photo.altText"
                                     class="w-full h-32 object-cover"
                                     @error="handleImageError($event, photo)">
                                <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                    <div class="flex space-x-2" @click.stop>
                                        <button @click="editPhoto(photo)" class="text-white hover:text-blue-300" title="Edit">✏️</button>
                                        <button @click="toggleSlider(photo)" class="text-white hover:text-yellow-300" title="Toggle Slider">🎞️</button>
                                        <button @click="deletePhoto(photo.id)" class="text-white hover:text-red-300" title="Delete">🗑️</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-2">
                                <p class="text-xs text-gray-600 truncate" x-text="photo.altText || 'No description'"></p>
                                <div class="flex justify-between items-center mt-1">
                                    <span class="text-xs" :class="photo.isHomepageSlider ? 'text-yellow-600' : 'text-gray-400'" title="In Slider">
                                        🎞️
                                    </span>
                                    <span class="text-xs" :class="photo.addWatermark ? 'text-blue-600' : 'text-gray-400'" title="Watermark">
                                        💧
                                    </span>
                                    <span class="text-xs text-gray-500" x-text="formatFileSize(photo.fileSize)"></span>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Slider Page - Enhanced -->
        <div x-show="currentPage === 'slider'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">Ana Sayfa Slider Yönetimi</h3>
                        <p class="text-sm text-gray-600 mt-1">Sürekli dönen fotoğraf slider'ını yönetin</p>
                    </div>
                    <div class="flex space-x-3">
                        <button @click="showSliderPreview = true" 
                                class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2">
                            <span>🎞️</span>
                            <span>Slider Önizleme</span>
                        </button>
                        <button @click="refreshSliderData()" 
                                class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2">
                            <span>🔄</span>
                            <span>Yenile</span>
                        </button>
                    </div>
                </div>

                <!-- Slider Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white text-lg">🎞️</div>
                            <div>
                                <p class="text-sm text-gray-600">Toplam Slider Fotoğrafı</p>
                                <p class="text-2xl font-bold text-blue-600" x-text="sliderPhotos.length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center text-white text-lg">🏗️</div>
                            <div>
                                <p class="text-sm text-gray-600">Proje Bağlantılı</p>
                                <p class="text-2xl font-bold text-green-600" x-text="sliderPhotos.filter(p => p.projectId).length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-yellow-600 rounded-lg flex items-center justify-center text-white text-lg">📝</div>
                            <div>
                                <p class="text-sm text-gray-600">Metin Overlay'li</p>
                                <p class="text-2xl font-bold text-yellow-600" x-text="sliderPhotos.filter(p => p.sliderText).length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center text-white text-lg">⚡</div>
                            <div>
                                <p class="text-sm text-gray-600">Otomatik Döndürme</p>
                                <p class="text-sm font-medium text-purple-600">3 saniyede bir</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-gray-50 p-4 rounded-lg mb-6">
                    <h4 class="font-medium text-gray-900 mb-3">Hızlı İşlemler</h4>
                    <div class="flex flex-wrap gap-3">
                        <button @click="bulkAddToSlider()" 
                                class="bg-green-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-green-700 flex items-center space-x-2">
                            <span>➕</span>
                            <span>Seçili Fotoğrafları Slider'a Ekle</span>
                        </button>
                        <button @click="bulkRemoveFromSlider()" 
                                class="bg-red-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-red-700 flex items-center space-x-2">
                            <span>➖</span>
                            <span>Seçili Fotoğrafları Slider'dan Çıkar</span>
                        </button>
                        <button @click="sortSliderPhotos()" 
                                class="bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 flex items-center space-x-2">
                            <span>🔄</span>
                            <span>Sıralamayı Düzenle</span>
                        </button>
                    </div>
                </div>

                <!-- Slider Photos Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <template x-for="(photo, index) in sliderPhotos" :key="photo.id">
                        <div class="relative group bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-blue-300 transition-all duration-300 hover:shadow-lg">
                            <!-- Photo Image -->
                            <div class="relative aspect-video">
                                <img :src="getPhotoUrl(photo)" 
                                     :alt="photo.altText || 'Slider fotoğrafı'"
                                     class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                                     @error="handleImageError($event, photo)">
                                
                                <!-- Overlay Gradient -->
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20"></div>
                                
                                <!-- Slide Number Badge -->
                                <div class="absolute top-3 left-3 bg-blue-600 text-white text-xs font-medium px-2 py-1 rounded-full">
                                    Sıra: <span x-text="index + 1"></span>
                                </div>
                                
                                <!-- Project Indicator -->
                                <div x-show="photo.projectId" class="absolute top-3 right-3">
                                    <div class="bg-green-600 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1">
                                        <span>🏗️</span>
                                        <span>Proje</span>
                                    </div>
                                </div>
                                
                                <!-- Remove Button -->
                                <button @click="removeFromSlider(photo.id)" 
                                        class="absolute top-3 right-3 bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm hover:bg-red-700 transition-colors duration-200"
                                        x-show="!photo.projectId"
                                        title="Slider'dan çıkar">
                                    ✕
                                </button>
                                
                                <!-- Quick Edit Button -->
                                <button @click="editSliderText(photo)" 
                                        class="absolute bottom-3 right-3 bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm hover:bg-blue-700 transition-colors duration-200"
                                        title="Metin düzenle">
                                    ✏️
                                </button>
                            </div>
                            
                            <!-- Photo Info -->
                            <div class="p-4">
                                <!-- Photo Title -->
                                <h5 class="font-medium text-gray-900 mb-2 line-clamp-1" 
                                    x-text="photo.altText || 'Başlıksız Fotoğraf'"></h5>
                                
                                <!-- Slider Text -->
                                <div class="mb-3">
                                    <p class="text-xs text-gray-500 mb-1">Slider Metni:</p>
                                    <p class="text-sm text-gray-700 line-clamp-2" 
                                       x-text="photo.sliderText || 'Metin eklenmemiş'"
                                       :class="!photo.sliderText ? 'italic text-gray-400' : ''"></p>
                                </div>
                                
                                <!-- Project Info -->
                                <div x-show="photo.projectId" class="mb-3">
                                    <p class="text-xs text-gray-500 mb-1">Bağlı Proje:</p>
                                    <p class="text-sm font-medium text-green-600" 
                                       x-text="projects.find(p => p.id === photo.projectId)?.title || 'Proje bulunamadı'"></p>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="flex space-x-2 mt-3">
                                    <button @click="viewSliderPhoto(photo)" 
                                            class="flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-xs hover:bg-gray-200 transition-colors duration-200">
                                        👁️ Görüntüle
                                    </button>
                                    <button @click="editSliderText(photo)" 
                                            class="flex-1 bg-blue-100 text-blue-700 px-3 py-2 rounded-lg text-xs hover:bg-blue-200 transition-colors duration-200">
                                        ✏️ Düzenle
                                    </button>
                                    <button x-show="photo.projectId" 
                                            @click="goToProject(photo.projectId)" 
                                            class="flex-1 bg-green-100 text-green-700 px-3 py-2 rounded-lg text-xs hover:bg-green-200 transition-colors duration-200">
                                        🏗️ Projeye Git
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                    
                    <!-- Empty State -->
                    <template x-if="sliderPhotos.length === 0">
                        <div class="col-span-full">
                            <div class="text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300">
                                <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl text-gray-400">🎞️</span>
                                </div>
                                <h4 class="text-lg font-medium text-gray-900 mb-2">Slider'da fotoğraf yok</h4>
                                <p class="text-gray-600 mb-4">Ana sayfa slider'ına fotoğraf eklemek için fotoğraf sayfasından seçim yapın</p>
                                <button @click="currentPage = 'photos'" 
                                        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    Fotoğraflara Git
                                </button>
                            </div>
                        </div>
                    </template>
                </div>

                <!-- Slider Navigation Help -->
                <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-medium text-blue-900 mb-2 flex items-center space-x-2">
                        <span>ℹ️</span>
                        <span>Slider Navigasyon Özellikleri</span>
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800">
                        <div>
                            <p class="font-medium mb-1">⌨️ Klavye Kontrolü:</p>
                            <ul class="space-y-1 text-blue-700">
                                <li>• ← Sol ok: Önceki fotoğraf</li>
                                <li>• → Sağ ok: Sonraki fotoğraf</li>
                                <li>• ESC: Önizlemeyi kapat</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-medium mb-1">🖱️ Fare/Dokunmatik Kontrol:</p>
                            <ul class="space-y-1 text-blue-700">
                                <li>• Sürükle: Fotoğraf değiştir</li>
                                <li>• Tıkla: Proje bilgilerini gör</li>
                                <li>• Otomatik döndürme: 3sn</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Languages Page -->
        <div x-show="currentPage === 'languages'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Language Management</h3>
                    <button @click="showLanguageForm = true" 
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        Add Language
                    </button>
                </div>
                
                <div class="space-y-3">
                    <template x-for="language in languages" :key="language.id">
                        <div class="flex items-center justify-between p-4 border rounded-lg">
                            <div class="flex items-center space-x-4">
                                <span class="text-2xl" x-text="getFlagEmoji(language.code)"></span>
                                <div>
                                    <h4 class="font-medium" x-text="language.name"></h4>
                                    <p class="text-sm text-gray-600" x-text="language.nativeName + ' (' + language.code + ')'"></p>
                                </div>
                                <span x-show="language.isDefault" class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Default</span>
                            </div>
                            <div class="flex space-x-2">
                                <button @click="editLanguage(language)" class="text-blue-600 hover:text-blue-800">✏️</button>
                                <button @click="toggleLanguageStatus(language)" class="text-yellow-600 hover:text-yellow-800">👁️</button>
                                <button @click="deleteLanguage(language.id)" class="text-red-600 hover:text-red-800" x-show="!language.isDefault">🗑️</button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Category Form Modal -->
        <div x-show="showCategoryForm" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" x-text="editingCategory ? 'Edit Category' : 'Add Category'"></h3>
                    <button @click="showCategoryForm = false; editingCategory = null" class="text-gray-500 hover:text-gray-700">×</button>
                </div>
                
                <form @submit.prevent="saveCategory()">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category Title</label>
                        <input type="text" x-model="categoryForm.title" 
                               @input="generateSlug('category')"
                               class="w-full border rounded px-3 py-2" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea x-model="categoryForm.description" 
                                  class="w-full border rounded px-3 py-2 h-20"></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Slug (URL)</label>
                        <input type="text" x-model="categoryForm.slug" 
                               class="w-full border rounded px-3 py-2" required>
                        <p class="text-xs text-gray-500 mt-1">Auto-generated from title, but you can edit it</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Parent Category</label>
                        <select x-model="categoryForm.parentId" class="w-full border rounded px-3 py-2">
                            <option value="">No Parent (Top Level)</option>
                            <template x-for="category in categories" :key="category.id">
                                <option :value="category.id" x-text="category.title"></option>
                            </template>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select x-model="categoryForm.status" class="w-full border rounded px-3 py-2">
                            <option value="1">Published</option>
                            <option value="2">Hidden</option>
                            <option value="3">Draft</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sort Order</label>
                        <input type="number" x-model="categoryForm.sortOrder" 
                               class="w-full border rounded px-3 py-2" min="0" value="0">
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" @click="showCategoryForm = false; editingCategory = null" 
                                class="px-4 py-2 text-gray-600 border rounded hover:bg-gray-50">Cancel</button>
                        <button type="submit" 
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                x-text="editingCategory ? 'Update' : 'Create'"></button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Photo Preview Modal -->
        <div x-show="showPhotoPreview" x-cloak class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" @click="showPhotoPreview = false">
            <div class="relative max-w-4xl max-h-screen p-4" @click.stop>
                <button @click="showPhotoPreview = false" 
                        class="absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75">
                    ×
                </button>
                <template x-if="previewPhoto">
                    <div class="bg-white rounded-lg overflow-hidden shadow-2xl">
                        <div class="relative">
                            <img :src="'http://localhost:5187' + previewPhoto.filePath" 
                                 :alt="previewPhoto.altText || 'Photo preview'"
                                 class="max-w-full max-h-screen object-contain">
                        </div>
                        <div class="p-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-lg font-semibold mb-2" x-text="previewPhoto.altText || 'Untitled Photo'"></h3>
                                    <p class="text-sm text-gray-600 mb-2" x-text="previewPhoto.caption || 'No caption'"></p>
                                    <div class="text-xs text-gray-500 space-y-1">
                                        <p><strong>File:</strong> <span x-text="previewPhoto.fileName"></span></p>
                                        <p><strong>Size:</strong> <span x-text="formatFileSize(previewPhoto.fileSize || 0)"></span></p>
                                        <p><strong>Project:</strong> <span x-text="projects.find(p => p.id === previewPhoto.projectId)?.title || 'No project'"></span></p>
                                    </div>
                                </div>
                                <div>
                                    <div class="space-y-2">
                                        <div class="flex items-center">
                                            <span class="w-3 h-3 rounded-full mr-2" :class="previewPhoto.isHomepageSlider ? 'bg-green-500' : 'bg-gray-300'"></span>
                                            <span class="text-sm" x-text="previewPhoto.isHomepageSlider ? 'In Homepage Slider' : 'Not in Slider'"></span>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="w-3 h-3 rounded-full mr-2" :class="getStatusColor(previewPhoto.status).split(' ')[0]"></span>
                                            <span class="text-sm" x-text="getStatusText(previewPhoto.status)"></span>
                                        </div>
                                        <div x-show="previewPhoto.sliderText" class="mt-2">
                                            <p class="text-xs text-gray-500"><strong>Slider Text:</strong></p>
                                            <p class="text-sm" x-text="previewPhoto.sliderText"></p>
                                        </div>
                                    </div>
                                    <div class="mt-4 space-x-2">
                                        <button @click="editPhoto(previewPhoto)" 
                                                class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Edit
                                        </button>
                                        <button @click="toggleSlider(previewPhoto)" 
                                                class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700"
                                                x-text="previewPhoto.isHomepageSlider ? 'Remove from Slider' : 'Add to Slider'">
                                        </button>
                                        <button @click="deletePhoto(previewPhoto.id); showPhotoPreview = false" 
                                                class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">
                                            Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Slider Preview Modal -->
        <div x-show="showSliderPreview" x-cloak class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" @click="showSliderPreview = false">
            <div class="relative max-w-6xl max-h-screen p-4" @click.stop>
                <button @click="showSliderPreview = false" 
                        class="absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75 z-10">
                    ×
                </button>
                <div class="bg-white rounded-lg overflow-hidden shadow-2xl">
                    <div class="p-4 border-b">
                        <h3 class="text-lg font-semibold">Homepage Slider Preview</h3>
                        <p class="text-sm text-gray-600">Showing <span x-text="sliderPhotos.length"></span> photos in slider</p>
                    </div>
                    <div class="relative" style="height: 400px;">
                        <template x-if="sliderPhotos.length > 0">
                            <div class="w-full h-full relative overflow-hidden">
                                <template x-for="(photo, index) in sliderPhotos" :key="photo.id">
                                    <div class="absolute inset-0 transition-opacity duration-500" 
                                         :class="currentSlideIndex === index ? 'opacity-100' : 'opacity-0'">
                                        <img :src="getPhotoUrl(photo)" 
                                             :alt="photo.altText || 'Slider image'"
                                             class="w-full h-full object-cover">
                                        <div x-show="photo.sliderText" 
                                             class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-4">
                                            <p class="text-lg" x-text="photo.sliderText"></p>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Navigation buttons -->
                                <button @click="previousSlide()" 
                                        class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75">
                                    ‹
                                </button>
                                <button @click="nextSlide()" 
                                        class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75">
                                    ›
                                </button>
                                
                                <!-- Slide indicators -->
                                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                                    <template x-for="(photo, index) in sliderPhotos" :key="index">
                                        <button @click="currentSlideIndex = index" 
                                                class="w-3 h-3 rounded-full transition-colors"
                                                :class="currentSlideIndex === index ? 'bg-white' : 'bg-white bg-opacity-50'">
                                        </button>
                                    </template>
                                </div>
                            </div>
                        </template>
                        <template x-if="sliderPhotos.length === 0">
                            <div class="flex items-center justify-center h-full text-gray-500">
                                <div class="text-center">
                                    <p class="text-lg mb-2">No photos in slider</p>
                                    <p class="text-sm">Add photos to the homepage slider to see the preview</p>
                                </div>
                            </div>
                        </template>
                    </div>
                    <div class="p-4 border-t">
                        <div class="flex justify-between items-center">
                            <div class="text-sm text-gray-600">
                                Slide <span x-text="currentSlideIndex + 1"></span> of <span x-text="sliderPhotos.length"></span>
                            </div>
                            <div class="space-x-2">
                                <button @click="autoSlide = !autoSlide" 
                                        class="px-3 py-1 rounded text-sm border"
                                        :class="autoSlide ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'"
                                        x-text="autoSlide ? 'Auto: ON' : 'Auto: OFF'">
                                </button>
                                <button @click="refreshSliderPreview()" 
                                        class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                    Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Project Form Modal -->
        <div x-show="showProjectForm" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" x-text="editingProject ? 'Edit Project' : 'Add Project'"></h3>
                    <button @click="showProjectForm = false; editingProject = null" class="text-gray-500 hover:text-gray-700">×</button>
                </div>
                
                <form @submit.prevent="saveProject()">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Project Title</label>
                            <input type="text" x-model="projectForm.title" 
                                   @input="generateSlug('project')"
                                   class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Slug (URL)</label>
                            <input type="text" x-model="projectForm.slug" 
                                   class="w-full border rounded px-3 py-2" required>
                            <p class="text-xs text-gray-500 mt-1">Auto-generated from title</p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea x-model="projectForm.description" 
                                  class="w-full border rounded px-3 py-2 h-24"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <input type="text" x-model="projectForm.location" 
                                   class="w-full border rounded px-3 py-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Client</label>
                            <input type="text" x-model="projectForm.client" 
                                   class="w-full border rounded px-3 py-2">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Area</label>
                            <input type="number" x-model="projectForm.area" 
                                   class="w-full border rounded px-3 py-2" step="0.01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Area Unit</label>
                            <select x-model="projectForm.areaUnit" class="w-full border rounded px-3 py-2">
                                <option value="m²">m²</option>
                                <option value="ft²">ft²</option>
                                <option value="acres">acres</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Completion Date</label>
                            <input type="date" x-model="projectForm.completionDate" 
                                   class="w-full border rounded px-3 py-2">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <select x-model="projectForm.categoryId" class="w-full border rounded px-3 py-2">
                                <option value="">No Category</option>
                                <template x-for="category in categories" :key="category.id">
                                    <option :value="category.id" x-text="category.title"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select x-model="projectForm.status" class="w-full border rounded px-3 py-2">
                                <option value="0">Published</option>
                                <option value="1">Hidden</option>
                                <option value="2">Draft</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort Order</label>
                            <input type="number" x-model="projectForm.sortOrder" 
                                   class="w-full border rounded px-3 py-2" min="0" value="0">
                        </div>
                        <div class="flex items-center mt-6">
                            <input type="checkbox" x-model="projectForm.isFeatured" 
                                   class="mr-2" id="featured">
                            <label for="featured" class="text-sm text-gray-700">Featured Project</label>
                        </div>
                    </div>
                    
                    <!-- SEO Fields -->
                    <div class="border-t pt-4 mb-4 seo-section">
                        <h4 class="text-lg font-medium mb-3 text-gray-900">SEO Settings</h4>
                        <h4 class="text-md font-medium mb-3">SEO Settings</h4>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Meta Title</label>
                            <input type="text" x-model="projectForm.metaTitle" 
                                   class="w-full border rounded px-3 py-2">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Meta Description</label>
                            <textarea x-model="projectForm.metaDescription" 
                                      class="w-full border rounded px-3 py-2 h-20"></textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Meta Keywords</label>
                            <input type="text" x-model="projectForm.metaKeywords" 
                                   class="w-full border rounded px-3 py-2" placeholder="keyword1, keyword2, keyword3">
                        </div>
                    </div>
                    
                    <!-- Content Blocks -->
                    <div class="border-t pt-4 mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-md font-medium">Content Blocks</h4>
                            <button type="button" @click="addContentBlock()" 
                                    class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                Add Block
                            </button>
                        </div>
                        
                        <div class="space-y-4">
                            <template x-for="(block, index) in projectForm.contentBlocks" :key="index">
                                <div class="bg-gray-50 p-4 rounded border">
                                    <div class="flex justify-between items-center mb-3">
                                        <select x-model="block.type" class="border rounded px-2 py-1">
                                            <option value="0">Text Block</option>
                                            <option value="1">Image Block</option>
                                            <option value="2">Image with Text</option>
                                            <option value="3">List Block</option>
                                        </select>
                                        <div class="flex space-x-2">
                                            <button type="button" @click="moveBlockUp(index)" 
                                                    :disabled="index === 0"
                                                    class="text-gray-600 hover:text-gray-800 disabled:opacity-50">↑</button>
                                            <button type="button" @click="moveBlockDown(index)" 
                                                    :disabled="index === projectForm.contentBlocks.length - 1"
                                                    class="text-gray-600 hover:text-gray-800 disabled:opacity-50">↓</button>
                                            <button type="button" @click="removeContentBlock(index)" 
                                                    class="text-red-600 hover:text-red-800">×</button>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 gap-3">
                                        <div>
                                            <input type="text" x-model="block.title" 
                                                   placeholder="Block title" 
                                                   class="w-full border rounded px-2 py-1 text-sm">
                                        </div>
                                        
                                        <div x-show="block.type == 1 || block.type == 2">
                                            <input type="text" x-model="block.imageUrl" 
                                                   placeholder="Image URL or upload image" 
                                                   class="w-full border rounded px-2 py-1 text-sm">
                                        </div>
                                        
                                        <div x-show="block.type == 0 || block.type == 2 || block.type == 3">
                                            <textarea x-model="block.content" 
                                                      placeholder="Content text" 
                                                      class="w-full border rounded px-2 py-1 text-sm h-20"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            
                            <div x-show="projectForm.contentBlocks.length === 0" 
                                 class="text-center text-gray-500 py-8 border-2 border-dashed border-gray-200 rounded">
                                No content blocks added yet. Click "Add Block" to create your first content block.
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" @click="showProjectForm = false; editingProject = null" 
                                class="px-4 py-2 text-gray-600 border rounded hover:bg-gray-50">Cancel</button>
                        <button type="submit" 
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                x-text="editingProject ? 'Update' : 'Create'"></button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Photo Upload Modal -->
        <div x-show="showPhotoUpload" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Upload Photos</h3>
                    <button @click="showPhotoUpload = false; resetPhotoForm()" class="text-gray-500 hover:text-gray-700">×</button>
                </div>
                
                <form @submit.prevent="uploadPhotos()" enctype="multipart/form-data">
                    <!-- Drag & Drop Area -->
                    <div class="mb-6">
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"
                             @dragover.prevent="dragOver($event)"
                             @dragleave.prevent="dragLeave($event)"
                             @drop.prevent="dropFiles($event)"
                             :class="{'border-blue-500 bg-blue-50': isDragOver}">
                            
                            <div x-show="photoForm.files.length === 0">
                                <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <p class="mt-2 text-sm text-gray-600">
                                    <span class="font-medium">Click to upload</span> or drag and drop
                                </p>
                                <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB each</p>
                                <input type="file" @change="handleFileSelect($event)" 
                                       multiple accept="image/*" 
                                       class="hidden" id="fileInput">
                                <button type="button" @click="document.getElementById('fileInput').click()" 
                                        class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                    Select Photos
                                </button>
                            </div>
                            
                            <!-- Photo Previews -->
                            <div x-show="photoForm.files.length > 0" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <template x-for="(file, index) in photoForm.files" :key="index">
                                    <div class="relative group">
                                        <img :src="getFilePreview(file)" 
                                             class="w-full h-32 object-cover rounded border">
                                        <button type="button" @click="removeFile(index)"
                                                class="absolute top-1 right-1 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity">
                                            ×
                                        </button>
                                        <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white text-xs p-1 truncate">
                                            <span x-text="file.name"></span>
                                        </div>
                                    </div>
                                </template>
                                <div class="border-2 border-dashed border-gray-300 rounded flex items-center justify-center h-32 cursor-pointer hover:border-blue-500"
                                     @click="document.getElementById('fileInput').click()">
                                    <div class="text-center">
                                        <svg class="mx-auto h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        <p class="text-xs text-gray-500 mt-1">Add More</p>
                                    </div>
                                </div>
                                <input type="file" @change="handleFileSelect($event)" 
                                       multiple accept="image/*" 
                                       class="hidden" id="fileInput">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Form Fields -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Project</label>
                            <select x-model="photoForm.projectId" class="w-full border rounded px-3 py-2">
                                <option value="">No Project (Standalone)</option>
                                <template x-for="project in projects" :key="project.id">
                                    <option :value="project.id" x-text="project.title"></option>
                                </template>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select x-model="photoForm.status" class="w-full border rounded px-3 py-2">
                                <option value="1">Published</option>
                                <option value="2">Hidden</option>
                                <option value="3">Draft</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Alt Text (Applied to all photos)</label>
                        <input type="text" x-model="photoForm.altText" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="Descriptive text for accessibility">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Caption (Applied to all photos)</label>
                        <input type="text" x-model="photoForm.caption" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="Photo caption">
                    </div>
                    
                    <!-- Upload Options -->
                    <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <h4 class="font-medium text-gray-900 mb-3">Upload Options</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" x-model="photoForm.addWatermark" 
                                       class="w-4 h-4 text-blue-600" id="watermark">
                                <label for="watermark" class="text-sm text-gray-700">
                                    Add watermark to all photos
                                </label>
                            </div>
                            
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" x-model="photoForm.isHomepageSlider" 
                                       class="w-4 h-4 text-blue-600" id="slider">
                                <label for="slider" class="text-sm text-gray-700">
                                    Add all photos to homepage slider
                                </label>
                            </div>
                            
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" x-model="photoForm.generateThumbnails" 
                                       class="w-4 h-4 text-blue-600" id="thumbnails">
                                <label for="thumbnails" class="text-sm text-gray-700">
                                    Generate thumbnails automatically
                                </label>
                            </div>
                            
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" x-model="photoForm.optimizeSize" 
                                       class="w-4 h-4 text-blue-600" id="optimize">
                                <label for="optimize" class="text-sm text-gray-700">
                                    Optimize image size for web
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div x-show="photoForm.isHomepageSlider" class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Slider Text (Applied to all photos)</label>
                        <input type="text" x-model="photoForm.sliderText" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="Text to display on homepage slider">
                    </div>
                    
                    <!-- Upload Progress -->
                    <div x-show="uploadProgress.show" class="mb-4">
                        <div class="bg-gray-200 rounded-full h-3">
                            <div class="bg-blue-600 h-3 rounded-full transition-all duration-300" 
                                 :style="`width: ${uploadProgress.percent}%`"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1" x-text="uploadProgress.message"></p>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" @click="showPhotoUpload = false; resetPhotoForm()" 
                                class="px-4 py-2 text-gray-600 border rounded hover:bg-gray-50">Cancel</button>
                        <button type="submit" 
                                :disabled="photoForm.files.length === 0 || uploadProgress.show"
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
                            <span x-show="!uploadProgress.show">Upload <span x-text="photoForm.files.length"></span> Photo(s)</span>
                            <span x-show="uploadProgress.show">Uploading...</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Translation Management Modal -->
        <div x-show="showTranslationForm" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" x-text="editingTranslation ? 'Edit Translation' : 'Add Translation'"></h3>
                    <button @click="showTranslationForm = false; editingTranslation = null" class="text-gray-500 hover:text-gray-700">×</button>
                </div>
                
                <form @submit.prevent="saveTranslation()">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Entity Type</label>
                            <select x-model="translationForm.entityName" @change="loadEntityOptions()" 
                                    class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Entity Type</option>
                                <option value="Project">Project</option>
                                <option value="Category">Category</option>
                                <option value="Photo">Photo</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Select Item</label>
                            <select x-model="translationForm.entityId" @change="loadOriginalText()"
                                    class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Item</option>
                                <template x-for="item in entityOptions" :key="item.id">
                                    <option :value="item.id" x-text="item.title || item.name"></option>
                                </template>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Field to Translate</label>
                            <select x-model="translationForm.fieldName" @change="loadOriginalText()" class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Field</option>
                                <template x-for="field in getAvailableFields()" :key="field">
                                    <option :value="field" x-text="field"></option>
                                </template>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Target Language</label>
                            <select x-model="translationForm.languageId" class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Language</option>
                                <template x-for="language in languages" :key="language.id">
                                    <option :value="language.id" x-text="language.name + ' (' + language.nativeName + ')'"></option>
                                </template>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Original Text</label>
                        <textarea x-model="translationForm.originalText" 
                                  class="w-full border rounded px-3 py-2 h-20 bg-gray-50" 
                                  readonly placeholder="Original text will appear here"></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Translation</label>
                        <textarea x-model="translationForm.value" 
                                  class="w-full border rounded px-3 py-2 h-24" 
                                  placeholder="Enter translation here" required></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" @click="showTranslationForm = false; editingTranslation = null" 
                                class="px-4 py-2 text-gray-600 border rounded hover:bg-gray-50">Cancel</button>
                        <button type="submit" 
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                x-text="editingTranslation ? 'Update' : 'Create'"></button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Language Form Modal -->
        <div x-show="showLanguageForm" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" x-text="editingLanguage ? 'Edit Language' : 'Add Language'"></h3>
                    <button @click="showLanguageForm = false; editingLanguage = null" class="text-gray-500 hover:text-gray-700">×</button>
                </div>
                
                <form @submit.prevent="saveLanguage()">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Language Code</label>
                        <input type="text" x-model="languageForm.code" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="e.g., en, tr, de" maxlength="5" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Language Name</label>
                        <input type="text" x-model="languageForm.name" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="e.g., English" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Native Name</label>
                        <input type="text" x-model="languageForm.nativeName" 
                               class="w-full border rounded px-3 py-2" 
                               placeholder="e.g., English" required>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select x-model="languageForm.status" class="w-full border rounded px-3 py-2">
                                <option value="0">Published</option>
                                <option value="1">Hidden</option>
                                <option value="2">Draft</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort Order</label>
                            <input type="number" x-model="languageForm.sortOrder" 
                                   class="w-full border rounded px-3 py-2" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="mb-4" x-show="!editingLanguage">
                        <div class="flex items-center">
                            <input type="checkbox" x-model="languageForm.isDefault" 
                                   class="mr-2" id="defaultLang">
                            <label for="defaultLang" class="text-sm text-gray-700">
                                Set as default language
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" @click="showLanguageForm = false; editingLanguage = null" 
                                class="px-4 py-2 text-gray-600 border rounded hover:bg-gray-50">Cancel</button>
                        <button type="submit" 
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                x-text="editingLanguage ? 'Update' : 'Create'"></button>
                    </div>
                </form>
            </div>
        </div>
        <div x-show="currentPage z=== 'translations'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Translation Management</h3>
                    <button @click="openTranslationForm()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        + Add Translation
                    </button>
                </div>
                
                <div class="mb-4 flex space-x-4">
                    <select x-model="translationFilter.entityName" @change="loadTranslations()" 
                            class="border rounded px-3 py-1">
                        <option value="">All Entities</option>
                        <option value="Project">Projects</option>
                        <option value="Category">Categories</option>
                        <option value="Photo">Photos</option>
                    </select>
                    
                    <select x-model="translationFilter.languageId" @change="loadTranslations()" 
                            class="border rounded px-3 py-1">
                        <option value="">All Languages</option>
                        <template x-for="language in languages" :key="language.id">
                            <option :value="language.id" x-text="language.name"></option>
                        </template>
                    </select>
                    
                    <button @click="loadTranslations()" class="bg-gray-600 text-white px-4 py-1 rounded hover:bg-gray-700">
                        Refresh
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-2 text-left">Entity</th>
                                <th class="px-4 py-2 text-left">Field</th>
                                <th class="px-4 py-2 text-left">Language</th>
                                <th class="px-4 py-2 text-left">Value</th>
                                <th class="px-4 py-2 text-left">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="translation in translations" :key="translation.id">
                                <tr class="border-t hover:bg-gray-50">
                                    <td class="px-4 py-2" x-text="translation.entityName + ' #' + translation.entityId"></td>
                                    <td class="px-4 py-2" x-text="translation.fieldName"></td>
                                    <td class="px-4 py-2" x-text="translation.language?.name || 'Unknown'"></td>
                                    <td class="px-4 py-2 max-w-xs truncate" x-text="translation.value" :title="translation.value"></td>
                                    <td class="px-4 py-2 space-x-2">
                                        <button @click="editTranslation(translation)" 
                                                class="text-blue-600 hover:text-blue-800 text-sm" title="Edit">
                                            ✏️ Edit
                                        </button>
                                        <button @click="deleteTranslation(translation.id)" 
                                                class="text-red-600 hover:text-red-800 text-sm" title="Delete">
                                            🗑️ Delete
                                        </button>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="translations.length === 0">
                                <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                                    No translations found. <a href="#" @click="openTranslationForm()" class="text-blue-600 hover:underline">Add the first translation</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- SEO Management Page -->
        <div x-show="currentPage === 'seo'" x-cloak>
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h3 class="text-lg font-semibold mb-4">SEO Overview</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-blue-600">Projects with SEO</p>
                                <p class="text-2xl font-bold text-blue-900" x-text="projects.filter(p => p.metaTitle && p.metaDescription).length"></p>
                            </div>
                            <div class="text-2xl">📊</div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-green-600">Photos with Alt Text</p>
                                <p class="text-2xl font-bold text-green-900" x-text="photos.filter(p => p.altText && p.altText.trim()).length"></p>
                            </div>
                            <div class="text-2xl">🖼️</div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-yellow-600">Categories with SEO</p>
                                <p class="text-2xl font-bold text-yellow-900" x-text="categories.filter(c => c.metaTitle && c.metaDescription).length"></p>
                            </div>
                            <div class="text-2xl">📁</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project SEO Management -->
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h3 class="text-lg font-semibold mb-4">Project SEO Status</h3>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-2 text-left">Project</th>
                                <th class="px-4 py-2 text-left">Meta Title</th>
                                <th class="px-4 py-2 text-left">Meta Description</th>
                                <th class="px-4 py-2 text-left">Keywords</th>
                                <th class="px-4 py-2 text-left">SEO Score</th>
                                <th class="px-4 py-2 text-left">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="project in projects" :key="project.id">
                                <tr class="border-t hover:bg-gray-50">
                                    <td class="px-4 py-2 font-medium" x-text="project.title"></td>
                                    <td class="px-4 py-2 max-w-xs">
                                        <span x-show="project.metaTitle" class="text-green-600 text-sm">✓</span>
                                        <span x-show="!project.metaTitle" class="text-red-600 text-sm">✗</span>
                                        <span class="ml-1 truncate" x-text="project.metaTitle || 'Missing'"></span>
                                    </td>
                                    <td class="px-4 py-2 max-w-xs">
                                        <span x-show="project.metaDescription" class="text-green-600 text-sm">✓</span>
                                        <span x-show="!project.metaDescription" class="text-red-600 text-sm">✗</span>
                                        <span class="ml-1 truncate" x-text="project.metaDescription || 'Missing'"></span>
                                    </td>
                                    <td class="px-4 py-2 max-w-xs">
                                        <span x-show="project.metaKeywords" class="text-green-600 text-sm">✓</span>
                                        <span x-show="!project.metaKeywords" class="text-red-600 text-sm">✗</span>
                                        <span class="ml-1 truncate" x-text="project.metaKeywords || 'Missing'"></span>
                                    </td>
                                    <td class="px-4 py-2">
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="h-2 rounded-full" 
                                                     :class="getSeoScoreColor(calculateSeoScore(project))"
                                                     :style="'width: ' + calculateSeoScore(project) + '%'"></div>
                                            </div>
                                            <span class="text-sm" x-text="calculateSeoScore(project) + '%'"></span>
                                        </div>
                                    </td>
                                    <td class="px-4 py-2">
                                        <button @click="openProjectSeoEdit(project)" 
                                                class="text-blue-600 hover:text-blue-800 text-sm">
                                            Edit SEO
                                        </button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Photo SEO Management -->
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h3 class="text-lg font-semibold mb-4">Photo SEO Status</h3>
                
                <div class="mb-4">
                    <button @click="generateMissingAltTexts()" 
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mr-2">
                        Auto-Generate Missing Alt Texts
                    </button>
                    <button @click="bulkOptimizePhotoSeo()" 
                            class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                        Bulk SEO Optimization
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <template x-for="photo in photos.filter(p => !p.altText || !p.altText.trim())" :key="photo.id">
                        <div class="border rounded-lg p-4 bg-red-50">
                            <img :src="getPhotoUrl(photo)" 
                                 :alt="photo.altText || 'No alt text'"
                                 class="w-full h-32 object-cover rounded mb-2">
                            <p class="text-sm font-medium truncate" x-text="photo.fileName"></p>
                            <p class="text-xs text-red-600 mb-2">Missing Alt Text</p>
                            <button @click="editPhotoSeo(photo)" 
                                    class="text-blue-600 hover:text-blue-800 text-sm">
                                Add Alt Text
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <script>
        function adminApp() {
            return {
                currentPage: 'dashboard',
                currentLanguage: '1',
                apiConnected: false,
                
                // Data
                stats: { projects: 0, photos: 0, categories: 0 },
                categories: [],
                projects: [],
                photos: [],
                filteredPhotos: [],
                sliderPhotos: [],
                languages: [],
                translations: [],
                recentProjects: [],
                
                // Filters
                selectedProjectFilter: '',
                photoSortBy: 'recent',
                selectedPhotos: [],
                translationFilter: { entityName: '', languageId: '' },
                
                // Search filters
                projectSearch: '',
                categorySearch: '',
                photoSearch: '',
                translationSearch: '',
                filteredProjects: [],
                filteredCategories: [],
                projectStatusFilter: '',
                
                // Forms
                showCategoryForm: false,
                showProjectForm: false,
                showPhotoUpload: false,
                showLanguageForm: false,
                showPhotoPreview: false,
                showSliderPreview: false,
                previewPhoto: null,
                currentSliderIndex: 0,
                sliderInterval: null,
                currentSlideIndex: 0,
                autoSlide: false,
                
                // Additional missing variables
                currentSlideIndex: 0,
                autoSlide: false,
                
                // Enhanced slider variables
                sliderDragStart: null,
                sliderDragEnd: null,
                showPhotoProjectInfo: false,
                selectedSliderPhoto: null,
                
                // Editing states
                editingProject: null,
                editingCategory: null,
                
                // Form Data
                categoryForm: {
                    title: '',
                    description: '',
                    slug: '',
                    parentId: '',
                    status: 1,
                    sortOrder: 0
                },
                projectForm: {
                    title: '',
                    description: '',
                    slug: '',
                    location: '',
                    completionDate: '',
                    client: '',
                    area: '',
                    areaUnit: 'm²',
                    categoryId: '',
                    status: 1,
                    sortOrder: 0,
                    isFeatured: false,
                    metaTitle: '',
                    metaDescription: '',
                    metaKeywords: '',
                    contentBlocks: []
                },
                photoForm: {
                    files: [],
                    projectId: '',
                    altText: '',
                    caption: '',
                    addWatermark: false,
                    isHomepageSlider: false,
                    sliderText: '',
                    status: 1,
                    generateThumbnails: true,
                    optimizeSize: true
                },
                
                // Upload state
                uploadProgress: {
                    show: false,
                    percent: 0,
                    message: ''
                },
                isDragOver: false,
                
                async saveProject() {
                    try {
                        const method = this.editingProject ? 'PUT' : 'POST';
                        const url = this.editingProject 
                            ? `http://localhost:5187/api/projects/${this.editingProject.id}`
                            : 'http://localhost:5187/api/projects';
                        
                        const projectData = {
                            title: this.projectForm.title,
                            description: this.projectForm.description,
                            slug: this.projectForm.slug,
                            location: this.projectForm.location,
                            completionDate: this.projectForm.completionDate || null,
                            client: this.projectForm.client,
                            area: parseFloat(this.projectForm.area) || null,
                            areaUnit: this.projectForm.areaUnit,
                            categoryId: parseInt(this.projectForm.categoryId) || null,
                            status: parseInt(this.projectForm.status),
                            sortOrder: parseInt(this.projectForm.sortOrder),
                            isFeatured: this.projectForm.isFeatured,
                            metaTitle: this.projectForm.metaTitle,
                            metaDescription: this.projectForm.metaDescription,
                            metaKeywords: this.projectForm.metaKeywords,
                            contentBlocks: this.projectForm.contentBlocks
                        };
                        
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify(projectData)
                        });
                        
                        if (response.ok) {
                            await this.loadProjects();
                            this.showProjectForm = false;
                            this.editingProject = null;
                            this.resetProjectForm();
                            alert(this.editingProject ? 'Project updated successfully!' : 'Project created successfully!');
                        } else {
                            const error = await response.text();
                            alert('Error saving project: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },

                resetProjectForm() {
                    this.projectForm = {
                        title: '',
                        description: '',
                        slug: '',
                        location: '',
                        completionDate: '',
                        client: '',
                        area: '',
                        areaUnit: 'm²',
                        categoryId: '',
                        status: 1,
                        sortOrder: 0,
                        isFeatured: false,
                        metaTitle: '',
                        metaDescription: '',
                        metaKeywords: '',
                        contentBlocks: []
                    };
                    this.editingProject = null;
                },
                
                init() {
                    this.checkApiConnection();
                    this.loadData();
                },
                
                async checkApiConnection() {
                    try {
                        const response = await fetch('http://localhost:5187/api/languages');
                        this.apiConnected = response.ok;
                    } catch (error) {
                        this.apiConnected = false;
                    }
                },
                
                async loadData() {
                    await this.loadCategories();
                    await this.loadProjects();
                    await this.loadPhotos();
                    await this.loadLanguages();
                    this.updateStats();
                },
                
                async loadCategories() {
                    try {
                        const response = await fetch('http://localhost:5187/api/categories');
                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}`);
                        }
                        const result = await response.json();
                        if (result && result.data) {
                            this.categories = result.data;
                        } else if (Array.isArray(result)) {
                            this.categories = result;
                        } else {
                            this.categories = [];
                        }
                        this.filteredCategories = this.categories;
                    } catch (error) {
                        console.error('Error loading categories:', error);
                        this.categories = [];
                    }
                },
                
                async loadProjects() {
                    try {
                        const response = await fetch('http://localhost:5187/api/projects');
                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}`);
                        }
                        const result = await response.json();
                        if (result && result.data) {
                            this.projects = result.data;
                        } else if (Array.isArray(result)) {
                            this.projects = result;
                        } else {
                            this.projects = [];
                        }
                        this.recentProjects = this.projects.slice(0, 5);
                        this.filteredProjects = this.projects;
                    } catch (error) {
                        console.error('Error loading projects:', error);
                        this.projects = [];
                        this.recentProjects = [];
                    }
                },
                
                async loadPhotos() {
                    try {
                        const response = await fetch('http://localhost:5187/api/photos');
                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}`);
                        }
                        const result = await response.json();
                        if (result && result.data) {
                            this.photos = result.data;
                        } else if (Array.isArray(result)) {
                            this.photos = result;
                        } else {
                            this.photos = [];
                        }
                        this.filteredPhotos = this.photos;
                        this.sliderPhotos = this.photos.filter(p => p.isHomepageSlider);
                    } catch (error) {
                        console.error('Error loading photos:', error);
                        this.photos = [];
                        this.filteredPhotos = [];
                        this.sliderPhotos = [];
                    }
                },
                
                async loadLanguages() {
                    try {
                        const response = await fetch('http://localhost:5187/api/languages');
                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}`);
                        }
                        const result = await response.json();
                        if (result && result.data) {
                            this.languages = result.data;
                        } else if (Array.isArray(result)) {
                            this.languages = result;
                        } else {
                            this.languages = [];
                        }
                    } catch (error) {
                        console.error('Error loading languages:', error);
                        this.languages = [];
                    }
                },
                
                filterPhotos() {
                    if (this.selectedProjectFilter) {
                        this.filteredPhotos = this.photos.filter(p => p.projectId == this.selectedProjectFilter);
                    } else {
                        this.filteredPhotos = this.photos;
                    }
                },
                
                updateStats() {
                    this.stats.projects = this.projects.length;
                    this.stats.photos = this.photos.length;
                    this.stats.categories = this.categories.length;
                },
                
                getPageTitle() {
                    const titles = {
                        dashboard: 'Dashboard',
                        categories: 'Categories',
                        projects: 'Projects',
                        photos: 'Photos',
                        slider: 'Homepage Slider',
                        languages: 'Languages',
                        translations: 'Translations'
                    };
                    return titles[this.currentPage] || 'Dashboard';
                },
                
                getStatusColor(status) {
                    const colors = {
                        1: 'bg-green-100 text-green-800', // Published
                        2: 'bg-gray-100 text-gray-800',   // Hidden
                        3: 'bg-yellow-100 text-yellow-800' // Draft
                    };
                    return colors[status] || 'bg-gray-100 text-gray-800';
                },
                
                getStatusText(status) {
                    const texts = {
                        1: 'Published',
                        2: 'Hidden',
                        3: 'Draft'
                    };
                    return texts[status] || 'Unknown';
                },
                
                getFlagEmoji(code) {
                    const flags = {
                        'tr': '🇹🇷',
                        'en': '🇬🇧',
                        'de': '🇩🇪'
                    };
                    return flags[code] || '🏳️';
                },
                
                // Drag and Drop for Categories
                dragStart(event, category) {
                    event.dataTransfer.setData('text/plain', JSON.stringify(category));
                },
                
                dragOver(event) {
                    event.preventDefault();
                    event.target.closest('.category-item').classList.add('drag-over');
                },
                
                drop(event, targetCategory) {
                    event.preventDefault();
                    event.target.closest('.category-item').classList.remove('drag-over');
                    const draggedCategory = JSON.parse(event.dataTransfer.getData('text/plain'));
                    
                    // Update category parent
                    console.log('Moving category', draggedCategory.id, 'under', targetCategory.id);
                    // API call would go here
                },
                
                // CRUD Operations
                async saveCategory() {
                    try {
                        const url = this.editingCategory 
                            ? `http://localhost:5187/api/categories/${this.editingCategory.id}`
                            : 'http://localhost:5187/api/categories';
                        
                        const method = this.editingCategory ? 'PUT' : 'POST';
                        
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                ...this.categoryForm,
                                parentId: this.categoryForm.parentId || null,
                                status: parseInt(this.categoryForm.status)
                            })
                        });
                        
                        if (response.ok) {
                            this.showCategoryForm = false;
                            this.editingCategory = null;
                            this.resetCategoryForm();
                            await this.loadCategories();
                            alert(this.editingCategory ? 'Category updated successfully!' : 'Category created successfully!');
                        } else {
                            const error = await response.text();
                            alert('Error saving category: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },
                
                async saveProject() {
                    try {
                        const url = this.editingProject 
                            ? `http://localhost:5187/api/projects/${this.editingProject.id}`
                            : 'http://localhost:5187/api/projects';
                        
                        const method = this.editingProject ? 'PUT' : 'POST';
                        
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                ...this.projectForm,
                                categoryId: this.projectForm.categoryId || null,
                                status: parseInt(this.projectForm.status),
                                area: this.projectForm.area ? parseFloat(this.projectForm.area) : null,
                                contentBlocks: []
                            })
                        });
                        
                        if (response.ok) {
                            this.showProjectForm = false;
                            this.editingProject = null;
                            this.resetProjectForm();
                            await this.loadProjects();
                            alert(this.editingProject ? 'Project updated successfully!' : 'Project created successfully!');
                        } else {
                            const error = await response.text();
                            alert('Error saving project: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },
                
                async uploadPhotos() {
                    try {
                        if (this.photoForm.files.length === 0) {
                            alert('Please select at least one photo');
                            return;
                        }
                        
                        this.uploadProgress.show = true;
                        this.uploadProgress.percent = 0;
                        this.uploadProgress.message = 'Preparing upload...';
                        
                        const totalFiles = this.photoForm.files.length;
                        let uploadedFiles = 0;
                        
                        for (const [index, file] of this.photoForm.files.entries()) {
                            this.uploadProgress.message = `Uploading ${file.name} (${index + 1}/${totalFiles})`;
                            
                            console.log('Uploading file:', file.name, 'Size:', file.size, 'Type:', file.type);
                            console.log('Current photoForm.status value:', this.photoForm.status, 'Type:', typeof this.photoForm.status);
                            
                            const formData = new FormData();
                            formData.append('File', file);
                            formData.append('AltText', this.photoForm.altText || file.name.split('.')[0]);
                            formData.append('Status', this.photoForm.status.toString());
                            
                            if (this.photoForm.caption) {
                                formData.append('Caption', this.photoForm.caption);
                            }
                            
                            if (this.photoForm.projectId) {
                                formData.append('ProjectId', this.photoForm.projectId);
                            }
                            
                            formData.append('AddWatermark', this.photoForm.addWatermark.toString());
                            formData.append('IsHomepageSlider', this.photoForm.isHomepageSlider.toString());
                            
                            if (this.photoForm.sliderText) {
                                formData.append('SliderText', this.photoForm.sliderText);
                            }
                            
                            formData.append('SortOrder', index.toString());
                            
                            console.log('FormData contents:');
                            for (let pair of formData.entries()) {
                                console.log(pair[0] + ': ' + pair[1]);
                            }
                            
                            const response = await fetch('http://localhost:5187/api/photos', {
                                method: 'POST',
                                body: formData
                            });
                            
                            console.log('Response status:', response.status);
                            
                            if (!response.ok) {
                                const error = await response.text();
                                console.error('Upload failed response:', error);
                                throw new Error(`Failed to upload ${file.name}: ${error}`);
                            }
                            
                            uploadedFiles++;
                            this.uploadProgress.percent = Math.round((uploadedFiles / totalFiles) * 100);
                        }
                        
                        this.uploadProgress.message = 'Upload completed successfully!';
                        
                        setTimeout(() => {
                            this.showPhotoUpload = false;
                            this.resetPhotoForm();
                            this.loadPhotos();
                            alert(`${totalFiles} photo(s) uploaded successfully!`);
                        }, 1000);
                        
                    } catch (error) {
                        this.uploadProgress.show = false;
                        alert('Error uploading photos: ' + error.message);
                    }
                },
                
                handleFileSelect(event) {
                    const newFiles = Array.from(event.target.files);
                    // Append new files to existing ones
                    this.photoForm.files = [...this.photoForm.files, ...newFiles];
                    event.target.value = ''; // Reset input
                },
                
                // Drag and Drop Functions
                dragOver(event) {
                    event.preventDefault();
                    this.isDragOver = true;
                },
                
                dragLeave(event) {
                    event.preventDefault();
                    this.isDragOver = false;
                },
                
                dropFiles(event) {
                    event.preventDefault();
                    this.isDragOver = false;
                    
                    const files = Array.from(event.dataTransfer.files);
                    const imageFiles = files.filter(file => file.type.startsWith('image/'));
                    
                    if (imageFiles.length !== files.length) {
                        alert('Only image files are allowed!');
                    }
                    
                    this.photoForm.files = [...this.photoForm.files, ...imageFiles];
                },
                
                removeFile(index) {
                    this.photoForm.files.splice(index, 1);
                },
                
                getFilePreview(file) {
                    return URL.createObjectURL(file);
                },
                
                resetCategoryForm() {
                    this.categoryForm = {
                        title: '',
                        description: '',
                        slug: '',
                        parentId: '',
                        status: 1,
                        sortOrder: 0
                    };
                },
                
                resetProjectForm() {
                    this.projectForm = {
                        title: '',
                        description: '',
                        slug: '',
                        location: '',
                        completionDate: '',
                        client: '',
                        area: '',
                        areaUnit: 'm²',
                        categoryId: '',
                        status: 1,
                        sortOrder: 0,
                        isFeatured: false,
                        metaTitle: '',
                        metaDescription: '',
                        metaKeywords: '',
                        contentBlocks: []
                    };
                },
                
                async editCategory(category) {
                    this.editingCategory = category;
                    this.categoryForm = {
                        title: category.title,
                        description: category.description,
                        slug: category.slug,
                        parentId: category.parentId || '',
                        status: category.status,
                        sortOrder: category.sortOrder
                    };
                    this.showCategoryForm = true;
                },
                
                async deleteCategory(id) {
                    if (confirm('Are you sure you want to delete this category? This will also delete all subcategories and projects in this category.')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/categories/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadCategories();
                                alert('Category deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting category: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async editProject(project) {
                    this.editingProject = project;
                    this.projectForm = {
                        title: project.title,
                        description: project.description,
                        slug: project.slug,
                        location: project.location,
                        completionDate: project.completionDate ? project.completionDate.split('T')[0] : '',
                        client: project.client,
                        area: project.area || '',
                        areaUnit: project.areaUnit,
                        categoryId: project.categoryId || '',
                        status: project.status,
                        sortOrder: project.sortOrder,
                        isFeatured: project.isFeatured,
                        metaTitle: project.metaTitle,
                        metaDescription: project.metaDescription,
                        metaKeywords: project.metaKeywords,
                        contentBlocks: project.contentBlocks || []
                    };
                    this.showProjectForm = true;
                },
                
                async deleteCategory(id) {
                    if (confirm('Are you sure you want to delete this category?')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/categories/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadCategories();
                                alert('Category deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting category: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async editProject(project) {
                    this.editingProject = project;
                    this.projectForm = {
                        title: project.title,
                        description: project.description,
                        slug: project.slug,
                        location: project.location,
                        completionDate: project.completionDate,
                        client: project.client,
                        area: project.area || '',
                        areaUnit: project.areaUnit,
                        categoryId: project.categoryId || '',
                        status: project.status,
                        sortOrder: project.sortOrder,
                        isFeatured: project.isFeatured,
                        metaTitle: project.metaTitle,
                        metaDescription: project.metaDescription,
                        metaKeywords: project.metaKeywords,
                        contentBlocks: project.contentBlocks || []
                    };
                    this.showProjectForm = true;
                },
                
                async toggleProjectStatus(project) {
                    try {
                        const newStatus = project.status === 1 ? 2 : 1; // Toggle between Published (1) and Hidden (2)
                        const response = await fetch(`http://localhost:5187/api/projects/${project.id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                ...project,
                                status: newStatus
                            })
                        });
                        
                        if (response.ok) {
                            await this.loadProjects();
                            alert(`Project ${newStatus === 0 ? 'published' : 'hidden'} successfully!`);
                        } else {
                            const error = await response.text();
                            alert('Error updating project status: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },
                
                async deleteProject(id) {
                    if (confirm('Are you sure you want to delete this project? This will also delete all photos and content blocks associated with this project.')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/projects/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadProjects();
                                await this.loadPhotos(); // Refresh photos as they might be deleted
                                alert('Project deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting project: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async editPhoto(photo) {
                    // For now, just show an alert. In a full implementation, this would open a photo edit modal
                    const newAltText = prompt('Edit Alt Text:', photo.altText);
                    if (newAltText !== null) {
                        try {
                            const formData = new FormData();
                            formData.append('AltText', newAltText);
                            formData.append('Status', photo.status.toString());
                            
                            const response = await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                                method: 'PUT',
                                body: formData
                            });
                            
                            if (response.ok) {
                                await this.loadPhotos();
                                alert('Photo updated successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error updating photo: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async toggleSlider(photo) {
                    try {
                        const newStatus = !photo.isHomepageSlider;
                        let sliderText = photo.sliderText;
                        
                        if (newStatus && !sliderText) {
                            sliderText = prompt('Enter text for slider:', '');
                            if (sliderText === null) return; // User cancelled
                        }
                        
                        const formData = new FormData();
                        formData.append('IsHomepageSlider', newStatus.toString());
                        if (sliderText) {
                            formData.append('SliderText', sliderText);
                        }
                        
                        const response = await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                            method: 'PUT',
                            body: formData
                        });
                        
                        if (response.ok) {
                            await this.loadPhotos();
                            alert(`Photo ${newStatus ? 'added to' : 'removed from'} homepage slider!`);
                        } else {
                            const error = await response.text();
                            alert('Error updating slider status: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },
                
                async deletePhoto(id) {
                    if (confirm('Are you sure you want to delete this photo?')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/photos/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadPhotos();
                                alert('Photo deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting photo: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async removeFromSlider(photoId) {
                    try {
                        const formData = new FormData();
                        formData.append('IsHomepageSlider', 'false');
                        
                        const response = await fetch(`http://localhost:5187/api/photos/${photoId}`, {
                            method: 'PUT',
                            body: formData
                        });
                        
                        if (response.ok) {
                            await this.loadPhotos();
                            alert('Fotoğraf sliderdan çıkarıldı!');
                        } else {
                            const error = await response.text();
                            alert('Sliderdan çıkarma hatası: ' + error);
                        }
                    } catch (error) {
                        alert('Hata: ' + error.message);
                    }
                },

                // Enhanced Slider Functions
                async refreshSliderData() {
                    await this.loadPhotos();
                    this.updateSliderStats();
                },

                updateSliderStats() {
                    this.sliderPhotos = this.photos.filter(p => p.isHomepageSlider);
                },

                async editSliderText(photo) {
                    const newText = prompt('Slider metni düzenle:', photo.sliderText || '');
                    if (newText !== null) {
                        try {
                            const formData = new FormData();
                            formData.append('SliderText', newText);
                            formData.append('IsHomepageSlider', 'true');
                            formData.append('Status', photo.status.toString());
                            
                            const response = await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                                method: 'PUT',
                                body: formData
                            });
                            
                            if (response.ok) {
                                await this.loadPhotos();
                                alert('Slider metni güncellendi!');
                            } else {
                                const error = await response.text();
                                alert('Güncelleme hatası: ' + error);
                            }
                        } catch (error) {
                            alert('Hata: ' + error.message);
                        }
                    }
                },

                viewSliderPhoto(photo) {
                    this.previewPhoto = photo;
                    this.showPhotoPreview = true;
                },

                goToProject(projectId) {
                    this.currentPage = 'projects';
                    // Scroll to the specific project or highlight it
                    setTimeout(() => {
                        const projectElement = document.querySelector(`[data-project-id="${projectId}"]`);
                        if (projectElement) {
                            projectElement.scrollIntoView({ behavior: 'smooth' });
                            projectElement.classList.add('ring-2', 'ring-blue-500');
                            setTimeout(() => {
                                projectElement.classList.remove('ring-2', 'ring-blue-500');
                            }, 3000);
                        }
                    }, 100);
                },

                sortSliderPhotos() {
                    const sortOptions = [
                        'Ekleme tarihine göre (Yeni → Eski)',
                        'Ekleme tarihine göre (Eski → Yeni)',
                        'Dosya adına göre (A → Z)',
                        'Dosya adına göre (Z → A)',
                        'Proje bağlantılı önce'
                    ];
                    
                    const choice = prompt('Sıralama seçeneği seçin:\n' + 
                        sortOptions.map((opt, idx) => `${idx + 1}. ${opt}`).join('\n') + 
                        '\n\nSeçiminizi girin (1-5):');
                    
                    const sortType = parseInt(choice);
                    if (sortType >= 1 && sortType <= 5) {
                        this.applySorting(sortType);
                    }
                },

                applySorting(sortType) {
                    switch(sortType) {
                        case 1: // Yeni → Eski
                            this.sliderPhotos.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                            break;
                        case 2: // Eski → Yeni
                            this.sliderPhotos.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                            break;
                        case 3: // A → Z
                            this.sliderPhotos.sort((a, b) => (a.fileName || '').localeCompare(b.fileName || ''));
                            break;
                        case 4: // Z → A
                            this.sliderPhotos.sort((a, b) => (b.fileName || '').localeCompare(a.fileName || ''));
                            break;
                        case 5: // Proje bağlantılı önce
                            this.sliderPhotos.sort((a, b) => {
                                if (a.projectId && !b.projectId) return -1;
                                if (!a.projectId && b.projectId) return 1;
                                return 0;
                            });
                            break;
                    }
                    alert('Sıralama uygulandı!');
                },
                
                // Utility Functions
                generateSlug(type) {
                    let title = '';
                    if (type === 'category') {
                        title = this.categoryForm.title;
                    } else if (type === 'project') {
                        title = this.projectForm.title;
                    }
                    
                    if (title) {
                        // Convert Turkish characters and create URL-friendly slug
                        const slug = title
                            .toLowerCase()
                            .replace(/ğ/g, 'g')
                            .replace(/ü/g, 'u')
                            .replace(/ş/g, 's')
                            .replace(/ı/g, 'i')
                            .replace(/ö/g, 'o')
                            .replace(/ç/g, 'c')
                            .replace(/[^a-z0-9\s-]/g, '') // Remove special characters
                            .replace(/\s+/g, '-') // Replace spaces with hyphens
                            .replace(/-+/g, '-') // Remove multiple hyphens
                            .replace(/^-|-$/g, ''); // Remove leading/trailing hyphens
                        
                        if (type === 'category') {
                            this.categoryForm.slug = slug;
                        } else if (type === 'project') {
                            this.projectForm.slug = slug;
                        }
                    }
                },
                
                resetPhotoForm() {
                    this.photoForm = {
                        files: [],
                        projectId: '',
                        altText: '',
                        caption: '',
                        addWatermark: false,
                        isHomepageSlider: false,
                        sliderText: '',
                        status: 1,
                        generateThumbnails: true,
                        optimizeSize: true
                    };
                    console.log('PhotoForm reset, status is now:', this.photoForm.status);
                    this.uploadProgress = {
                        show: false,
                        percent: 0,
                        message: ''
                    };
                    this.isDragOver = false;
                },
                
                // Content Block Management
                addContentBlock() {
                    this.projectForm.contentBlocks.push({
                        type: 0, // Text block by default
                        title: '',
                        content: '',
                        imageUrl: '',
                        sortOrder: this.projectForm.contentBlocks.length
                    });
                },
                
                removeContentBlock(index) {
                    this.projectForm.contentBlocks.splice(index, 1);
                    // Update sort orders
                    this.projectForm.contentBlocks.forEach((block, i) => {
                        block.sortOrder = i;
                    });
                },
                
                moveBlockUp(index) {
                    if (index > 0) {
                        const blocks = this.projectForm.contentBlocks;
                        [blocks[index], blocks[index - 1]] = [blocks[index - 1], blocks[index]];
                        // Update sort orders
                        blocks.forEach((block, i) => {
                            block.sortOrder = i;
                        });
                    }
                },
                
                moveBlockDown(index) {
                    const blocks = this.projectForm.contentBlocks;
                    if (index < blocks.length - 1) {
                        [blocks[index], blocks[index + 1]] = [blocks[index + 1], blocks[index]];
                        // Update sort orders
                        blocks.forEach((block, i) => {
                            block.sortOrder = i;
                        });
                    }
                },
                
                // Photo Management Functions
                togglePhotoSelection(photoId) {
                    const index = this.selectedPhotos.indexOf(photoId);
                    if (index > -1) {
                        this.selectedPhotos.splice(index, 1);
                    } else {
                        this.selectedPhotos.push(photoId);
                    }
                },
                
                sortPhotos() {
                    switch (this.photoSortBy) {
                        case 'name':
                            this.filteredPhotos.sort((a, b) => a.altText.localeCompare(b.altText));
                            break;
                        case 'size':
                            this.filteredPhotos.sort((a, b) => b.fileSize - a.fileSize);
                            break;
                        case 'project':
                            this.filteredPhotos.sort((a, b) => {
                                const projectA = this.projects.find(p => p.id === a.projectId)?.title || 'No Project';
                                const projectB = this.projects.find(p => p.id === b.projectId)?.title || 'No Project';
                                return projectA.localeCompare(projectB);
                            });
                            break;
                        default: // recent
                            this.filteredPhotos.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    }
                },
                
                async bulkAddToSlider() {
                    if (confirm(`Add ${this.selectedPhotos.length} photos to homepage slider?`)) {
                        try {
                            for (const photoId of this.selectedPhotos) {
                                const formData = new FormData();
                                formData.append('IsHomepageSlider', 'true');
                                await fetch(`http://localhost:5187/api/photos/${photoId}`, {
                                    method: 'PUT',
                                    body: formData
                                });
                            }
                            this.selectedPhotos = [];
                            await this.loadPhotos();
                            alert('Photos added to slider successfully!');
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async bulkRemoveFromSlider() {
                    if (confirm(`Remove ${this.selectedPhotos.length} photos from homepage slider?`)) {
                        try {
                            for (const photoId of this.selectedPhotos) {
                                const formData = new FormData();
                                formData.append('IsHomepageSlider', 'false');
                                await fetch(`http://localhost:5187/api/photos/${photoId}`, {
                                    method: 'PUT',
                                    body: formData
                                });
                            }
                            this.selectedPhotos = [];
                            await this.loadPhotos();
                            alert('Photos removed from slider successfully!');
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                async bulkDelete() {
                    if (confirm(`Are you sure you want to delete ${this.selectedPhotos.length} photos? This action cannot be undone.`)) {
                        try {
                            for (const photoId of this.selectedPhotos) {
                                await fetch(`http://localhost:5187/api/photos/${photoId}`, {
                                    method: 'DELETE',
                                    headers: {
                                        'Content-Type': 'application/json; charset=utf-8',
                                    }
                                });
                            }
                            this.selectedPhotos = [];
                            await this.loadPhotos();
                            alert('Photos deleted successfully!');
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },
                
                formatFileSize(bytes) {
                    if (bytes === 0) return '0 Bytes';
                    const k = 1024;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                },
                
                openPhotoPreview(photo) {
                    this.previewPhoto = photo;
                    this.showPhotoPreview = true;
                },

                // Preview and Slider Functions
                openSliderPreview() {
                    this.currentSlideIndex = 0;
                    this.showSliderPreview = true;
                    // Add keyboard event listener when slider opens
                    document.addEventListener('keydown', this.handleSliderKeyboard.bind(this));
                    if (this.autoSlide) {
                        this.startAutoSlide();
                    }
                },

                closeSliderPreview() {
                    this.showSliderPreview = false;
                    this.stopAutoSlide();
                    // Remove keyboard event listener when slider closes
                    document.removeEventListener('keydown', this.handleSliderKeyboard.bind(this));
                },

                nextSlide() {
                    if (this.sliderPhotos.length > 0) {
                        this.currentSlideIndex = (this.currentSlideIndex + 1) % this.sliderPhotos.length;
                    }
                },

                previousSlide() {
                    if (this.sliderPhotos.length > 0) {
                        this.currentSlideIndex = this.currentSlideIndex === 0 
                            ? this.sliderPhotos.length - 1 
                            : this.currentSlideIndex - 1;
                    }
                },

                startAutoSlide() {
                    if (this.slideInterval) {
                        clearInterval(this.slideInterval);
                    }
                    this.slideInterval = setInterval(() => {
                        if (this.autoSlide && this.showSliderPreview) {
                            this.nextSlide();
                        }
                    }, 3000);
                },

                stopAutoSlide() {
                    if (this.slideInterval) {
                        clearInterval(this.slideInterval);
                        this.slideInterval = null;
                    }
                },

                // Enhanced slider navigation
                handleSliderKeyboard(event) {
                    if (!this.showSliderPreview) return;
                    
                    switch(event.key) {
                        case 'ArrowLeft':
                            event.preventDefault();
                            this.previousSlide();
                            break;
                        case 'ArrowRight':
                            event.preventDefault();
                            this.nextSlide();
                            break;
                        case 'Escape':
                            event.preventDefault();
                            this.closeSliderPreview();
                            break;
                    }
                },

                // Mouse drag functionality
                sliderDragStart: null,
                sliderDragEnd: null,
                
                handleSliderMouseDown(event) {
                    this.sliderDragStart = {
                        x: event.clientX || event.touches?.[0]?.clientX,
                        y: event.clientY || event.touches?.[0]?.clientY
                    };
                },

                handleSliderMouseMove(event) {
                    if (!this.sliderDragStart) return;
                    event.preventDefault();
                },

                handleSliderMouseUp(event) {
                    if (!this.sliderDragStart) return;
                    
                    this.sliderDragEnd = {
                        x: event.clientX || event.changedTouches?.[0]?.clientX,
                        y: event.clientY || event.changedTouches?.[0]?.clientY
                    };
                    
                    const deltaX = this.sliderDragEnd.x - this.sliderDragStart.x;
                    const deltaY = Math.abs(this.sliderDragEnd.y - this.sliderDragStart.y);
                    
                    // Only trigger if horizontal swipe is more significant than vertical
                    if (Math.abs(deltaX) > 50 && Math.abs(deltaX) > deltaY) {
                        if (deltaX > 0) {
                            this.previousSlide();
                        } else {
                            this.nextSlide();
                        }
                    }
                    
                    this.sliderDragStart = null;
                    this.sliderDragEnd = null;
                },

                // Click to show project info
                showPhotoProjectInfo: false,
                selectedSliderPhoto: null,
                
                handleSliderPhotoClick(photo) {
                    this.selectedSliderPhoto = photo;
                    this.showPhotoProjectInfo = true;
                },

                async goToPhotoProject(photo) {
                    if (photo.projectId) {
                        this.showPhotoProjectInfo = false;
                        this.showSliderPreview = false;
                        this.stopAutoSlide();
                        // Switch to projects page and highlight the specific project
                        this.currentPage = 'projects';
                        // Optional: scroll to specific project
                        setTimeout(() => {
                            const projectElement = document.querySelector(`[data-project-id="${photo.projectId}"]`);
                            if (projectElement) {
                                projectElement.scrollIntoView({ behavior: 'smooth' });
                                projectElement.classList.add('ring-4', 'ring-blue-500');
                                setTimeout(() => {
                                    projectElement.classList.remove('ring-4', 'ring-blue-500');
                                }, 3000);
                            }
                        }, 100);
                    } else {
                        alert('This photo is not associated with a project.');
                    }
                },

                async refreshSliderPreview() {
                    await this.loadPhotos();
                    this.currentSlideIndex = 0;
                },
                
                async duplicatePhoto(photo) {
                    if (confirm('Create a copy of this photo?')) {
                        try {
                            // This would require a specific duplicate endpoint on the backend
                            alert('Duplicate functionality would be implemented with backend support');
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },

                // Translation Management Functions
                showTranslationForm: false,
                editingTranslation: null,
                translationForm: {
                    entityName: '',
                    entityId: '',
                    fieldName: '',
                    languageId: '',
                    value: '',
                    originalText: ''
                },
                entityOptions: [],

                async loadTranslations() {
                    try {
                        let url = 'http://localhost:5187/api/translations';
                        const params = new URLSearchParams();
                        
                        if (this.translationFilter.entityName) {
                            params.append('entityName', this.translationFilter.entityName);
                        }
                        if (this.translationFilter.languageId) {
                            params.append('languageId', this.translationFilter.languageId);
                        }
                        
                        if (params.toString()) {
                            url += '?' + params.toString();
                        }
                        
                        const response = await fetch(url);
                        if (response.ok) {
                            const result = await response.json();
                            this.translations = result.data || result || [];
                        } else {
                            console.error('Error loading translations');
                            this.translations = [];
                        }
                    } catch (error) {
                        console.error('Error loading translations:', error);
                        this.translations = [];
                    }
                },

                async loadEntityOptions() {
                    this.entityOptions = [];
                    this.translationForm.entityId = '';
                    this.translationForm.originalText = '';
                    
                    if (!this.translationForm.entityName) return;
                    
                    try {
                        let endpoint = '';
                        switch (this.translationForm.entityName) {
                            case 'Project':
                                endpoint = 'projects';
                                this.entityOptions = this.projects.map(p => ({ id: p.id, title: p.title }));
                                break;
                            case 'Category':
                                endpoint = 'categories';
                                this.entityOptions = this.categories.map(c => ({ id: c.id, title: c.title }));
                                break;
                            case 'Photo':
                                endpoint = 'photos';
                                this.entityOptions = this.photos.map(p => ({ id: p.id, title: p.altText || `Photo ${p.id}` }));
                                break;
                        }
                    } catch (error) {
                        console.error('Error loading entity options:', error);
                    }
                },

                getAvailableFields() {
                    if (!this.translationForm.entityName) return [];
                    
                    const fieldMap = {
                        'Project': ['title', 'description', 'location', 'client', 'metaTitle', 'metaDescription', 'metaKeywords'],
                        'Category': ['title', 'description', 'metaTitle', 'metaDescription', 'metaKeywords'],
                        'Photo': ['altText', 'caption', 'sliderText']
                    };
                    
                    return fieldMap[this.translationForm.entityName] || [];
                },

                async loadOriginalText() {
                    if (!this.translationForm.entityName || !this.translationForm.entityId || !this.translationForm.fieldName) {
                        this.translationForm.originalText = '';
                        return;
                    }
                    
                    try {
                        let item = null;
                        switch (this.translationForm.entityName) {
                            case 'Project':
                                item = this.projects.find(p => p.id == this.translationForm.entityId);
                                break;
                            case 'Category':
                                item = this.categories.find(c => c.id == this.translationForm.entityId);
                                break;
                            case 'Photo':
                                item = this.photos.find(p => p.id == this.translationForm.entityId);
                                break;
                        }
                        
                        if (item && item[this.translationForm.fieldName]) {
                            this.translationForm.originalText = item[this.translationForm.fieldName];
                        } else {
                            this.translationForm.originalText = 'No original text found';
                        }
                    } catch (error) {
                        console.error('Error loading original text:', error);
                        this.translationForm.originalText = 'Error loading original text';
                    }
                },

                openTranslationForm() {
                    this.resetTranslationForm();
                    this.showTranslationForm = true;
                },

                resetTranslationForm() {
                    this.translationForm = {
                        entityName: '',
                        entityId: '',
                        fieldName: '',
                        languageId: '',
                        value: '',
                        originalText: ''
                    };
                    this.entityOptions = [];
                    this.editingTranslation = null;
                },

                editTranslation(translation) {
                    this.editingTranslation = translation;
                    this.translationForm = {
                        entityName: translation.entityName,
                        entityId: translation.entityId,
                        fieldName: translation.fieldName,
                        languageId: translation.languageId,
                        value: translation.value,
                        originalText: translation.originalText || ''
                    };
                    this.loadEntityOptions();
                    this.showTranslationForm = true;
                },

                async saveTranslation() {
                    try {
                        const method = this.editingTranslation ? 'PUT' : 'POST';
                        const url = this.editingTranslation 
                            ? `http://localhost:5187/api/translations/${this.editingTranslation.id}`
                            : 'http://localhost:5187/api/translations';
                        
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                entityName: this.translationForm.entityName,
                                entityId: parseInt(this.translationForm.entityId),
                                fieldName: this.translationForm.fieldName,
                                languageId: parseInt(this.translationForm.languageId),
                                value: this.translationForm.value
                            })
                        });
                        
                        if (response.ok) {
                            await this.loadTranslations();
                            this.showTranslationForm = false;
                            this.editingTranslation = null;
                            alert(this.editingTranslation ? 'Translation updated successfully!' : 'Translation created successfully!');
                        } else {
                            const error = await response.text();
                            alert('Error saving translation: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },

                async deleteTranslation(id) {
                    if (confirm('Are you sure you want to delete this translation?')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/translations/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadTranslations();
                                alert('Translation deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting translation: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },

                // Language Management Functions
                showLanguageForm: false,
                editingLanguage: null,
                languageForm: {
                    code: '',
                    name: '',
                    nativeName: '',
                    status: 1,
                    sortOrder: 0,
                    isDefault: false
                },

                async loadLanguages() {
                    try {
                        const response = await fetch('http://localhost:5187/api/languages');
                        if (response.ok) {
                            const result = await response.json();
                            this.languages = result.data || result || [];
                        } else {
                            console.error('Error loading languages');
                            this.languages = [];
                        }
                    } catch (error) {
                        console.error('Error loading languages:', error);
                        this.languages = [];
                    }
                },

                openLanguageForm() {
                    this.resetLanguageForm();
                    this.showLanguageForm = true;
                },

                resetLanguageForm() {
                    this.languageForm = {
                        code: '',
                        name: '',
                        nativeName: '',
                        status: 1,
                        sortOrder: 0,
                        isDefault: false
                    };
                    this.editingLanguage = null;
                },

                editLanguage(language) {
                    this.editingLanguage = language;
                    this.languageForm = {
                        code: language.code,
                        name: language.name,
                        nativeName: language.nativeName,
                        status: language.status,
                        sortOrder: language.sortOrder,
                        isDefault: language.isDefault
                    };
                    this.showLanguageForm = true;
                },

                async saveLanguage() {
                    try {
                        const method = this.editingLanguage ? 'PUT' : 'POST';
                        const url = this.editingLanguage 
                            ? `http://localhost:5187/api/languages/${this.editingLanguage.id}`
                            : 'http://localhost:5187/api/languages';
                        
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                code: this.languageForm.code,
                                name: this.languageForm.name,
                                nativeName: this.languageForm.nativeName,
                                status: parseInt(this.languageForm.status),
                                sortOrder: parseInt(this.languageForm.sortOrder),
                                isDefault: this.languageForm.isDefault
                            })
                        });
                        
                        if (response.ok) {
                            await this.loadLanguages();
                            this.showLanguageForm = false;
                            this.editingLanguage = null;
                            alert(this.editingLanguage ? 'Language updated successfully!' : 'Language created successfully!');
                        } else {
                            const error = await response.text();
                            alert('Error saving language: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },

                async deleteLanguage(id) {
                    if (confirm('Are you sure you want to delete this language? This will also delete all translations in this language.')) {
                        try {
                            const response = await fetch(`http://localhost:5187/api/languages/${id}`, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8',
                                }
                            });
                            
                            if (response.ok) {
                                await this.loadLanguages();
                                await this.loadTranslations(); // Refresh translations as they might be deleted
                                alert('Language deleted successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error deleting language: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },

                // Utility Functions
                getFlagEmoji(languageCode) {
                    const flagMap = {
                        'tr': '🇹🇷',
                        'en': '🇺🇸',
                        'de': '🇩🇪',
                        'fr': '🇫🇷',
                        'es': '🇪🇸',
                        'it': '🇮🇹',
                        'ru': '🇷🇺',
                        'ar': '🇸🇦',
                        'ja': '🇯🇵',
                        'ko': '🇰🇷',
                        'zh': '🇨🇳'
                    };
                    return flagMap[languageCode.toLowerCase()] || '🌐';
                },

                async toggleLanguageStatus(language) {
                    try {
                        const newStatus = language.status === 1 ? 2 : 1;
                        const response = await fetch(`http://localhost:5187/api/languages/${language.id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json; charset=utf-8',
                            },
                            body: JSON.stringify({
                                ...language,
                                status: newStatus
                            })
                        });
                        
                        if (response.ok) {
                            await this.loadLanguages();
                            alert(`Language ${newStatus === 1 ? 'activated' : 'deactivated'} successfully!`);
                        } else {
                            const error = await response.text();
                            alert('Error updating language status: ' + error);
                        }
                    } catch (error) {
                        alert('Error: ' + error.message);
                    }
                },

                getPageTitle() {
                    const titles = {
                        'dashboard': 'Dashboard',
                        'categories': 'Category Management',
                        'projects': 'Project Management',
                        'photos': 'Photo Management',
                        'languages': 'Language Management',
                        'translations': 'Translation Management',
                        'seo': 'SEO Management'
                    };
                    return titles[this.currentPage] || 'Admin Panel';
                },

                getStatusColor(status) {
                    const colors = {
                        1: 'bg-green-100 text-green-800', // Published
                        2: 'bg-gray-100 text-gray-800',   // Hidden
                        3: 'bg-yellow-100 text-yellow-800' // Draft
                    };
                    return colors[status] || 'bg-gray-100 text-gray-800';
                },

                getStatusText(status) {
                    const texts = {
                        1: 'Published',
                        2: 'Hidden',
                        3: 'Draft'
                    };
                    return texts[status] || 'Unknown';
                },

                updateStats() {
                    this.stats = {
                        projects: this.projects.length,
                        photos: this.photos.length,
                        categories: this.categories.length
                    };
                    this.recentProjects = this.projects.slice(0, 5);
                },

                // Photo URL and Error Handling Functions
                getPhotoUrl(photo) {
                    // Try API provided URL first, then fallback to manual construction, then placeholder
                    if (photo.url) {
                        return photo.url;
                    } else if (photo.thumbnailPath) {
                        return 'http://localhost:5187/Uploads' + photo.thumbnailPath;
                    } else if (photo.filePath) {
                        return 'http://localhost:5187/Uploads/' + photo.filePath;
                    } else {
                        return this.getPlaceholderImage();
                    }
                },

                handleImageError(event, photo) {
                    console.warn('Failed to load image for photo:', photo.id, photo.fileName);
                    // Try fallback to filePath if thumbnailPath failed
                    if (event.target.src.includes('thumbnailPath') && photo.filePath) {
                        event.target.src = 'http://localhost:5187/Uploads/' + photo.filePath;
                    } else if (photo.url && event.target.src !== photo.url) {
                        // Try the API provided URL as fallback
                        event.target.src = photo.url;
                    } else {
                        event.target.src = this.getPlaceholderImage();
                    }
                },

                getPlaceholderImage() {
                    return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDIwMCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04NSA2NEw5NSA3NEwxMTUgNTRMMTM1IDc0SDE2NVY5NEg0NVY3NEw2NSA1NEw4NSA2NFoiIGZpbGw9IiNEMUQ1REIiLz4KPGNpcmNsZSBjeD0iNzUiIGN5PSI0NCIgcj0iOCIgZmlsbD0iI0QxRDVEQiIvPgo8L3N2Zz4K';
                },

                debugPhotoPath(photo) {
                    console.log('Photo debug info:', {
                        id: photo.id,
                        fileName: photo.fileName,
                        filePath: photo.filePath,
                        thumbnailPath: photo.thumbnailPath,
                        fullUrl: this.getPhotoUrl(photo)
                    });
                },

                // Search and Filter Functions
                filterProjects() {
                    let filtered = this.projects;
                    
                    // Text search
                    if (this.projectSearch) {
                        const search = this.projectSearch.toLowerCase();
                        filtered = filtered.filter(project => 
                            project.title.toLowerCase().includes(search) ||
                            (project.description && project.description.toLowerCase().includes(search)) ||
                            (project.location && project.location.toLowerCase().includes(search)) ||
                            (project.client && project.client.toLowerCase().includes(search))
                        );
                    }
                    
                    // Category filter
                    if (this.selectedProjectFilter) {
                        filtered = filtered.filter(project => 
                            project.categoryId == this.selectedProjectFilter
                        );
                    }
                    
                    // Status filter
                    if (this.projectStatusFilter !== '') {
                        filtered = filtered.filter(project => 
                            project.status == this.projectStatusFilter
                        );
                    }
                    
                    this.filteredProjects = filtered;
                },

                filterCategories() {
                    let filtered = this.categories;
                    
                    if (this.categorySearch) {
                        const search = this.categorySearch.toLowerCase();
                        filtered = filtered.filter(category => 
                            category.title.toLowerCase().includes(search) ||
                            (category.description && category.description.toLowerCase().includes(search))
                        );
                    }
                    
                    this.filteredCategories = filtered;
                },

                filterPhotos() {
                    let filtered = this.photos;
                    
                    // Text search
                    if (this.photoSearch) {
                        const search = this.photoSearch.toLowerCase();
                        filtered = filtered.filter(photo => 
                            (photo.altText && photo.altText.toLowerCase().includes(search)) ||
                            (photo.caption && photo.caption.toLowerCase().includes(search)) ||
                            photo.fileName.toLowerCase().includes(search)
                        );
                    }
                    
                    // Project filter (existing)
                    if (this.selectedProjectFilter) {
                        filtered = filtered.filter(photo => 
                            photo.projectId == this.selectedProjectFilter
                        );
                    }
                    
                    this.filteredPhotos = filtered;
                    this.sortPhotos();
                },

                // SEO Management Functions
                calculateSeoScore(project) {
                    let score = 0;
                    const maxScore = 100;
                    
                    // Title checks (30 points)
                    if (project.title && project.title.length > 10) score += 10;
                    if (project.metaTitle && project.metaTitle.length >= 30 && project.metaTitle.length <= 60) {
                        score += 20;
                    } else if (project.metaTitle) {
                        score += 10;
                    }
                    
                    // Description checks (30 points)
                    if (project.description && project.description.length > 50) score += 10;
                    if (project.metaDescription && project.metaDescription.length >= 120 && project.metaDescription.length <= 160) {
                        score += 20;
                    } else if (project.metaDescription) {
                        score += 10;
                    }
                    
                    // Keywords (20 points)
                    if (project.metaKeywords && project.metaKeywords.split(',').length >= 3) {
                        score += 20;
                    } else if (project.metaKeywords) {
                        score += 10;
                    }
                    
                    // Slug quality (10 points)
                    if (project.slug && project.slug.length > 5 && !project.slug.includes('_')) {
                        score += 10;
                    }
                    
                    // Content quality (10 points)
                    if (project.contentBlocks && project.contentBlocks.length > 0) {
                        score += 10;
                    }
                    
                    return Math.min(score, maxScore);
                },

                getSeoScoreColor(score) {
                    if (score >= 80) return 'bg-green-500';
                    if (score >= 60) return 'bg-yellow-500';
                    if (score >= 40) return 'bg-orange-500';
                    return 'bg-red-500';
                },

                async openProjectSeoEdit(project) {
                    // Open the project form with focus on SEO fields
                    this.editingProject = project;
                    this.projectForm = {
                        title: project.title,
                        description: project.description,
                        slug: project.slug,
                        location: project.location,
                        completionDate: project.completionDate,
                        client: project.client,
                        area: project.area || '',
                        areaUnit: project.areaUnit,
                        categoryId: project.categoryId || '',
                        status: project.status,
                        sortOrder: project.sortOrder,
                        isFeatured: project.isFeatured,
                        metaTitle: project.metaTitle,
                        metaDescription: project.metaDescription,
                        metaKeywords: project.metaKeywords,
                        contentBlocks: project.contentBlocks || []
                    };
                    this.showProjectForm = true;
                    
                    // Scroll to SEO section after a brief delay
                    setTimeout(() => {
                        const seoSection = document.querySelector('.seo-section');
                        if (seoSection) {
                            seoSection.scrollIntoView({ behavior: 'smooth' });
                        }
                    }, 100);
                },

                async editPhotoSeo(photo) {
                    const newAltText = prompt('Enter SEO-optimized Alt Text for this photo:', photo.altText || '');
                    if (newAltText !== null && newAltText.trim()) {
                        try {
                            const formData = new FormData();
                            formData.append('AltText', newAltText.trim());
                            formData.append('Status', photo.status.toString());
                            
                            const response = await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                                method: 'PUT',
                                body: formData
                            });
                            
                            if (response.ok) {
                                await this.loadPhotos();
                                alert('Photo alt text updated successfully!');
                            } else {
                                const error = await response.text();
                                alert('Error updating photo: ' + error);
                            }
                        } catch (error) {
                            alert('Error: ' + error.message);
                        }
                    }
                },

                async generateMissingAltTexts() {
                    const photosWithoutAlt = this.photos.filter(p => !p.altText || !p.altText.trim());
                    
                    if (photosWithoutAlt.length === 0) {
                        alert('All photos already have alt text!');
                        return;
                    }
                    
                    if (confirm(`Generate alt text for ${photosWithoutAlt.length} photos? This will use the filename as a base.`)) {
                        try {
                            for (const photo of photosWithoutAlt) {
                                // Generate basic alt text from filename
                                const altText = photo.fileName
                                    .replace(/\.[^/.]+$/, '') // Remove file extension
                                    .replace(/[-_]/g, ' ') // Replace hyphens and underscores with spaces
                                    .replace(/\b\w/g, l => l.toUpperCase()) // Capitalize first letter of each word
                                    .trim();
                                
                                const formData = new FormData();
                                formData.append('AltText', altText);
                                formData.append('Status', photo.status.toString());
                                
                                await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                                    method: 'PUT',
                                    body: formData
                                });
                            }
                            
                            await this.loadPhotos();
                            alert(`Generated alt text for ${photosWithoutAlt.length} photos!`);
                        } catch (error) {
                            alert('Error generating alt texts: ' + error.message);
                        }
                    }
                },

                async bulkOptimizePhotoSeo() {
                    const photosToOptimize = this.photos.filter(p => 
                        !p.altText || 
                        p.altText.length < 10 || 
                        !p.caption
                    );
                    
                    if (photosToOptimize.length === 0) {
                        alert('All photos are already SEO optimized!');
                        return;
                    }
                    
                    if (confirm(`Optimize SEO for ${photosToOptimize.length} photos?`)) {
                        try {
                            for (const photo of photosToOptimize) {
                                const formData = new FormData();
                                
                                // Improve alt text if needed
                                if (!photo.altText || photo.altText.length < 10) {
                                    const project = this.projects.find(p => p.id === photo.projectId);
                                    const altText = `${project?.title || 'Interior design'} - ${photo.fileName.replace(/\.[^/.]+$/, '').replace(/[-_]/g, ' ')}`;
                                    formData.append('AltText', altText);
                                }
                                
                                // Add caption if missing
                                if (!photo.caption) {
                                    const project = this.projects.find(p => p.id === photo.projectId);
                                    const caption = `Professional interior design photo from ${project?.title || 'our portfolio'}`;
                                    formData.append('Caption', caption);
                                }
                                
                                formData.append('Status', photo.status.toString());
                                
                                await fetch(`http://localhost:5187/api/photos/${photo.id}`, {
                                    method: 'PUT',
                                    body: formData
                                });
                            }
                            
                            await this.loadPhotos();
                            alert(`Optimized SEO for ${photosToOptimize.length} photos!`);
                        } catch (error) {
                            alert('Error optimizing photo SEO: ' + error.message);
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Photo Preview Modal -->
    <div x-show="showPhotoPreview" x-cloak class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" @click="showPhotoPreview = false">
        <div class="relative max-w-4xl max-h-full p-4" @click.stop>
            <button @click="showPhotoPreview = false" class="absolute top-2 right-2 text-white hover:text-gray-300 text-2xl z-10">×</button>
            <div class="bg-white rounded-lg overflow-hidden">
                <img :src="previewPhoto ? getPhotoUrl(previewPhoto) : ''" :alt="previewPhoto ? previewPhoto.altText : ''" class="max-w-full max-h-96 object-contain">
                <div class="p-4">
                    <h3 class="text-lg font-semibold mb-2" x-text="previewPhoto ? previewPhoto.altText || 'Untitled Photo' : ''"></h3>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div><span class="font-medium">File:</span> <span x-text="previewPhoto ? previewPhoto.fileName : ''"></span></div>
                        <div><span class="font-medium">Size:</span> <span x-text="previewPhoto ? formatFileSize(previewPhoto.fileSize) : ''"></span></div>
                    </div>
                    <div class="mt-4 flex space-x-2">
                        <button @click="editPhoto(previewPhoto)" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Edit</button>
                        <button @click="toggleSlider(previewPhoto)" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Toggle Slider</button>
                        <button @click="deletePhoto(previewPhoto.id); showPhotoPreview = false" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Enhanced Slider Preview Modal -->
    <div x-show="showSliderPreview" x-cloak class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50" 
         @keydown.window="handleSliderKeyboard($event)"
         @click="closeSliderPreview()">
        <div class="relative max-w-5xl w-full h-full flex items-center justify-center" @click.stop>
            <button @click="closeSliderPreview()" 
                    class="absolute top-4 right-4 text-white hover:text-gray-300 text-3xl z-10 bg-black bg-opacity-50 rounded-full w-12 h-12 flex items-center justify-center">×</button>
            
            <div class="relative w-full max-w-4xl h-96 bg-black rounded-lg overflow-hidden" 
                 @mousedown="handleSliderMouseDown($event)"
                 @mousemove="handleSliderMouseMove($event)"
                 @mouseup="handleSliderMouseUp($event)"
                 @touchstart="handleSliderMouseDown($event)"
                 @touchmove="handleSliderMouseMove($event)"
                 @touchend="handleSliderMouseUp($event)"
                 style="user-select: none;">
                
                <template x-for="(photo, index) in sliderPhotos" :key="photo.id">
                    <div class="absolute inset-0 transition-opacity duration-500 cursor-pointer" 
                         :class="index === currentSliderIndex ? 'opacity-100' : 'opacity-0'"
                         @click="handleSliderPhotoClick(photo)">
                        <img :src="getPhotoUrl(photo)" :alt="photo.altText" class="w-full h-full object-cover pointer-events-none">
                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-6" x-show="photo.sliderText">
                            <h3 class="text-white text-xl font-semibold" x-text="photo.sliderText"></h3>
                        </div>
                        <!-- Click indicator -->
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-opacity-70 pointer-events-none">
                            <div class="bg-black bg-opacity-50 rounded-full p-3">
                                <span class="text-sm">Click for project info</span>
                            </div>
                        </div>
                    </div>
                </template>
                
                <button @click="previousSlide()" 
                        class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-3xl bg-black bg-opacity-50 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-75" 
                        x-show="sliderPhotos.length > 1">
                    ‹
                </button>
                <button @click="nextSlide()" 
                        class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-3xl bg-black bg-opacity-50 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-75" 
                        x-show="sliderPhotos.length > 1">
                    ›
                </button>
                
                <!-- Slide indicators -->
                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                    <template x-for="(photo, index) in sliderPhotos" :key="index">
                        <button @click="currentSliderIndex = index" 
                                class="w-3 h-3 rounded-full transition-colors"
                                :class="currentSliderIndex === index ? 'bg-white' : 'bg-white bg-opacity-50'">
                        </button>
                    </template>
                </div>
            </div>
            
            <!-- Slider info panel -->
            <div class="absolute top-4 left-4 bg-white bg-opacity-90 rounded-lg p-4 max-w-xs">
                <h4 class="font-semibold">Slider Preview</h4>
                <p class="text-sm">Photos: <span x-text="sliderPhotos.length"></span></p>
                <p class="text-xs text-gray-600 mt-2">Use ← → keys, click & drag, or touch to navigate</p>
                <div class="mt-2">
                    <button @click="autoSlide = !autoSlide; autoSlide ? startAutoSlide() : stopAutoSlide()" 
                            class="text-xs px-2 py-1 rounded" 
                            :class="autoSlide ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-700'"
                            x-text="autoSlide ? 'Auto: ON' : 'Auto: OFF'">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Project Info Modal -->
    <div x-show="showPhotoProjectInfo" x-cloak class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-60" @click="showPhotoProjectInfo = false">
        <div class="bg-white rounded-lg max-w-md w-full mx-4 p-6" @click.stop>
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Project Information</h3>
                <button @click="showPhotoProjectInfo = false" class="text-gray-500 hover:text-gray-700 text-xl">×</button>
            </div>
            
            <template x-if="selectedSliderPhoto">
                <div>
                    <!-- Photo thumbnail -->
                    <div class="mb-4">
                        <img :src="getPhotoUrl(selectedSliderPhoto)" 
                             :alt="selectedSliderPhoto.altText" 
                             class="w-full h-32 object-cover rounded-lg">
                    </div>
                    
                    <!-- Photo info -->
                    <div class="mb-4">
                        <h4 class="font-medium text-gray-900 mb-2">Photo Details</h4>
                        <p class="text-sm text-gray-600" x-show="selectedSliderPhoto.altText" x-text="selectedSliderPhoto.altText"></p>
                        <p class="text-sm text-gray-600" x-show="selectedSliderPhoto.caption" x-text="selectedSliderPhoto.caption"></p>
                        <p class="text-xs text-gray-500 mt-1" x-text="selectedSliderPhoto.fileName"></p>
                    </div>
                    
                    <!-- Project info -->
                    <template x-if="selectedSliderPhoto.projectId">
                        <div class="mb-6">
                            <h4 class="font-medium text-gray-900 mb-2">Associated Project</h4>
                            <template x-for="project in projects" :key="project.id">
                                <div x-show="project.id === selectedSliderPhoto.projectId" class="border rounded-lg p-3 bg-gray-50">
                                    <h5 class="font-medium text-gray-800" x-text="project.title"></h5>
                                    <p class="text-sm text-gray-600 mt-1" x-text="project.description || 'No description available'"></p>
                                    <div class="flex items-center justify-between mt-2">
                                        <span class="text-xs text-gray-500" x-text="project.location || 'Location not specified'"></span>
                                        <span class="text-xs px-2 py-1 rounded-full" 
                                              :class="getStatusColor(project.status)" 
                                              x-text="getStatusText(project.status)"></span>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </template>
                    
                    <!-- Action buttons -->
                    <div class="flex space-x-3">
                        <button @click="goToPhotoProject(selectedSliderPhoto)" 
                                class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700"
                                x-show="selectedSliderPhoto.projectId">
                            Go to Project
                        </button>
                        <button @click="showPhotoProjectInfo = false" 
                                class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400">
                            Close
                        </button>
                    </div>
                    
                    <div x-show="!selectedSliderPhoto.projectId" class="text-center text-gray-500 text-sm">
                        This photo is not associated with any project.
                    </div>
                </div>
            </template>
        </div>
    </div>
</body>
</html>